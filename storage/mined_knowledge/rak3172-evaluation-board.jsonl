{"id":"4b9d2ad38fb195eeb1e1d2c832535523","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"RAK3172 Evaluation Board AT Command Manual Overview","content":"## Introduction\n\nThe RAK3172 Evaluation WisDuo Board is based on the STM32WLE5CCU6 chip and it is designed to simplify LoRaWAN and LoRa point-to-point (P2P) communication. To integrate LoRa technology into your projects, we implemented an easy-to-use USB interface, through which you can send AT commands. Through these AT commands, you can set the parameters needed for LoRa P2P and LoRaWAN communication.\n\nThe RAK3172 Evaluation Board consists of two modules:\n- RAK3372 WisBlock Core module\n   The RAK3372 is a module built with the [RAK3172 WisDuo Stamp Module](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/overview/) on a WisBlock Core-compatible PCB.\n- RAK5005-O Base Board\n   The RAK5005-O is a WisBlock Base Board that provides a power supply, battery connector, solar panel charging connector, one IO-Slot, and four small extension slots to use WisBlock modules with the evaluation board. You can find detailed information in the [RAK5005-O Documentation](https://docs.rakwireless.com/product-categories/wisblock/rak5005-o/overview/).\n\nThe USB serial communication is exposed on the USB connector or the RAK5005-O base board. The default parameters of the UART2 communication are **115200 / 8-N-1**. Firmware upgrade is also possible through this port. To get familiar with the pin distribution of this module and find a schematic circuit of a reference application, refer to the [RAK3172-E Module Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/datasheet/).\n\n### Links to Quick Start Guide\n\nFor AT commands example usage, you can check these sections of the quick start guide:\n\n- [TTN OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#ttn-otaa-device-registration) - How to add OTAA device on TTN and what AT commands to use on RAK3172-E OTAA activation.\n- [TTN ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#ttn-abp-device-registration) - How to add ABP device on TTN and what AT commands to use on RAK3172-E ABP activation.\n- [Chirpstack OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#chirpstack-otaa-device-registration) - How to add OTAA device to Chirpstack and what AT commands to use on RAK3172-E OTAA activation.\n- [Chirpstack ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#chirpstack-abp-device-registration) - How to add ABP device on Chirpstack and what AT commands to use on RAK3172-E ABP activation.\n- [LoRa P2P](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#lora-p2p-mode) - Point to point communication between two RAK3172-E modules.\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\at-command-manual.md","token_count":0}
{"id":"6bfa54c654a492b013b0c57835ea06a9","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"AT Commands List for RAK3172-E","content":"## AT Commands List\n\nThere are two AT Commands set for RAK3172-E depending on the firmware uploaded on the device.\n\n1. [RUI3 AT Commands](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/at-command-manual/)\n\n\n> **TIP:** NOTE\nIn addition, aside on UART2 that is connected to USB-UART converter, AT commands can also be interfaced via **TX1/RX1** on the WisBlock Base board. It is not configured to accept AT command by default. To configure TX1/RX1 interfaces, refer to [RUI3 Serial Operating Modes](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/#rak-unified-interface-v3-rui3-serial-operating-modes).\n\n\n2. [AT Commands (DEPRECATED) - FW version 1.0.4 and below](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/deprecated-at-command/)\n\n\n> **WARNING:** - There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n- If the host microcontroller code is based on this old firmware, we have a [RAK3172 AT Command migration guide](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3) that explain in detail the few differences between the two AT commands set.\n\n\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\at-command-manual.md","token_count":0}
{"id":"e7c3f1295fb2ff2c2b5507d81ece234a","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"RAK3172-E Evaluation Board Overview and Features","content":"## Overview\n\n### Description\n\nThe RAK3172-E is a WisDuo evaluation board for the RAK3172 module, using an STM32WLE5CCU6 SoC chip.  It is based on the RAK3372 WisBlock Core, compatible with the RAK5005-O base board. It provides easy access to the important pins of the RAK3172 module, simplifying development and testing. It also allows connection of other modules to the base board slots, enabling the building of complete IoT projects with integrated connectors for battery and solar panel, plus an onboard charging circuit.\n\nThis module complies with LoRaWAN 1.0.3 specifications (Classes A, B, and C). It also supports LoRa point-to-point (P2P) communication, facilitating the quick implementation of customized long-range LoRa networks.\n\n### Features\n\n- Based on **STM32WLE5CCU6**\n- **LoRaWAN 1.0.3** specification compliant\n- **Supported bands**: EU433, CN470, IN865, EU868, AU915, US915, KR920, RU864, and AS923-1/2/3/4\n- LoRaWAN Activation by OTAA/ABP\n- LoRa Point-to-Point (P2P) communication\n- Custom firmware using Arduino via RUI3 API\n- Easy to use AT command set via UART interface\n- Long-range - greater than 15¬†km with optimized antenna\n- ARM Cortex-M4 32-bit\n- 256¬†kbytes flash memory with ECC\n- 64¬†kbytes RAM\n- **Supply Voltage**: 5¬†V via USB or 3.7-4.2¬†V using Li-Ion Battery\n- **Temperature Range**: -20¬∞¬†C ~ 70¬∞¬†C\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\datasheet.md","token_count":0}
{"id":"50a56c013e65bd780d02cc8b1d918792","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"RAK3172 Evaluation Board Hardware and Software Specifications","content":"## Specifications\n\nThis section covers the hardware and software specifications for the RAK3172 Evaluation Board.  It includes the interfaces, operating parameters, and a link to the board's latest firmware.\n\n### Overview\n\n> **Image:** RAK3172 Evaluation Board Overview\n\n### Hardware\n\nThe hardware specification is categorized into six parts.  It discusses the interfacing, pinouts, and their corresponding functions and diagrams. It also covers the electrical, mechanical, and environmental parameters, including tabular data of the functionalities and standard values of the RAK3172 Evaluation Board.\n\n#### Interfaces\n\n> **Image:** RAK3172 Evaluation Board Interfaces\n\n> **Image:** Parts RAK3372 Module\n\n##### RF Interface\n\nThe RF Antenna of the RAK3172 Evaluation Board is connected to a standard iPEX antenna connector.\n\n> **Image:** RAK3172 LoRa antenna\n\n\n> **WARNING:** Make sure to install the LoRa antenna first before powering the RAK3172 Evaluation Board. Failure to do so can damage the board.\n\n\n##### USB Interface\n\nThe Micro-B USB connector is compliant with the USB 2.0 specification. The pin definition of the USB interface is shown below:\n\n| **Pin Number** | **Pin Name** | **Description**             |\n| -------------- | ------------ | --------------------------- |\n| 1              | USB_VBUS     | (+5¬†V) USB Bus Voltage |\n| 2              | USB_DM       | USB Bus D+ positive pin     |\n| 3              | USB_DP       | USB Bus D- negative pin     |\n| 4              | NC           | Not connected               |\n| 5              | GND          | Ground                      |\n\n> **Image:** RAK3172 Micro-B USB connector\n\nThe USB data bus is connected to a **USB-SERIAL CH340** chip. The **CH340** is a series of USB bus adapters that provide a virtual serial interface over the USB bus.\n\n##### Battery Connector\n\nThe RAK3172 Evaluation Board can be powered by a battery via the P1 connector. The battery is not included in the packaging.\n\nUse **Figure 6** as a guide to connect the battery. The pin highlighted in the yellow box with the triangle silkscreen mark indicates pin 1 (GND).\n\n> **Image:** RAK3172 EVB battery connector\n\nThe pin definition of the RAK3172 Evaluation Board Li-Ion battery connector is shown in the table below. The matching connector for the battery wires is a [JST PHR-2 2¬†mm pitch female](https://www.jst-mfg.com/product/detail_e.php?series=199).\n\n** P1 Battery Connector **\n\n| **Pin** | **Pin Name** | **Description**               |\n| ------- | ------------ | ----------------------------- |\n| 1       | GND          | Ground                        |\n| 2       | VBAT         | Positive + pin of the battery |\n\nThe full specification of RAK3172 Evaluation Board battery is shown in the table below.\n\n| **No.** | **Item**                  | **Specification**                    |\n| ------- | ------------------------- | ------------------------------------ |\n| 1       | Charge Cut-off Voltage    | 4.2¬†V                           |\n| 2       | Nominal Voltage           | 3.7¬†V                           |\n| 3       | Discharge Cut-off Voltage | 2.75¬†V                          |\n| 4       | Typical Capacity          | 2650¬†mAh                        |\n| 5       | Max Discharge Current     | 0.5¬†C at 25¬†‚ÑÉ to 45¬†‚ÑÉ |\n| 6       | PH Connector              | 2.0¬†mm pitch                    |\n| 7       | Cable Length              | 110.0¬±3.0¬†mm                    |\n| 8       | Cable Color               | Red: VBAT, Black: GND                |\n\n\n> **TIP:** NOTE\nThe voltage of the Li-Ion battery **must not exceed 4.3¬†V**. When connecting the battery make sure the polarity is correct. Not all connectors are wired the same.\n\n\n##### Solar Panel Connector\n\nA 5¬†V solar panel can be connected to the board via the P2 connector to charge the battery. The solar panel is not included in the RAK3172 Evaluation Board packaging. Use **Figure 7** as a guide to connect the solar panel. The pin highlighted in the yellow box with triangle silkscreen marking indicates pin 1 (5¬†V solar panel positive).\n\n> **Image:** RAK3172 EVB solar connector\n\nThe pin definition of the RAK3172 Evaluation Board solar panel connector is shown in the table below. The matching connector for the solar panel wires is an [JST ZHR-2 1.5¬†mm pitch female](https://www.jst-mfg.com/product/detail_e.php?series=287).\n\n** P2 Solar Panel connector **\n\n| **Pin** | **Pin Name** | **Description**               |\n| ------- | ------------ | ----------------------------- |\n| 1       | C0NN_5V      | Positive + pin of solar panel |\n| 2       | GND          | GND                           |\n\nThe full specification of the Solar Panel for the RAK3172 Evaluation Board is shown in the table below.\n\n| **No.** | **Item**        | **Specification**                                        |\n| ------- | --------------- | -------------------------------------------------------- |\n| 1       | Nominal Voltage | 5¬†V                                                 |\n| 2       | Typical Current | 80¬†mA                                               |\n| 3       | Size            | Length: 60¬†mm, Width: 60¬†mm, Height: 2¬†mm |\n| 4       | Connector       | 1.5¬†mm pitch                                        |\n| 5       | Cable Color     | Red: C0NN_5V, Black: GND                                 |\n\n\n> **TIP:** NOTE\nThe output of the solar panel **must not exceed 5.5¬†V**. Otherwise, it may cause permanent damage to the board.\n\n\n##### LEDs\n\n- üî¥ **Red LED** - connected to the charger chip to indicate the charger status. When the battery is charging, the red LED is on. When the battery is full, this LED is dimmed or off.\n- üü¢ **Green LED** - connected to the MCU module, can be controlled in code by the user.\n- üîµ **Blue LED** - connected to the MCU module, can be controlled in code by the user.\n\n##### RESET Button\n\nThe reset push button is connected to the NRST pin of the RAK3172. When pushed, it resets the MCU.\n\n#### Pin Definition\n\nThe following tables below show the pin definitions of the RAK3172 Evaluation Board:\n\n##### J10, J11, J12 2.54¬†mm header\n\n###### J10\n\n| **Pin Number** | **Pin Name**  | **Description**                      | **Microcontroller Pin** |\n| -------------- | ------------- | ------------------------------------ | ----------------------- |\n| 1              | BOOT0         | Boot for ST MCU                      | BOOT0                   |\n| 2              | VDD           | Power supply generated by CPU module |                         |\n| 3              | TX1/USART1_TX | USART1 TX pin                        | PB6                     |\n| 4              | RX1/USART1_RX | USART1 RX pin                        | PB7                     |\n\n###### J11\n\n| **Pin Number** | **Pin Name** | **Description**               | **Microcontroller Pin** |\n| -------------- | ------------ | ----------------------------- | ----------------------- |\n| 1              | AIN1         | ADC input signal              | PB3                     |\n| 2              | IO1          | General purpose IO            | PB5                     |\n| 3              | IO2          | Power switch control of 3V3_S | PA8                     |\n| 4              | GND          | Ground                        |                         |\n\n\n> **TIP:** NOTE\n3V3_S is another 3.3¬†V power supply that can be turned on and off by the MCU. Set pin IO2 to `LOW`/`0` when the sensor is not in use to save power.\n\n\n###### J12\n\n| **Pin Number** | **Pin Name** | **Description**                      | **Microcontroller Pin** |\n| -------------- | ------------ | ------------------------------------ | :---------------------: |\n| 1              | GND          | Ground                               |                         |\n| 2              | I2C1_SCL     | I2C clock pin                        |          PA12           |\n| 3              | I2C1_SDA     | I2C data pin                         |          PA11           |\n| 4              | VDD          | Power supply generated by CPU module |                         |\n\n#### RF Characteristics\n\nThe RAK3172 supports two frequency variations: RAK3172(L) for low radio frequencies and RAK3172(H) for high radio frequencies.\n\n##### Operating Frequencies\n\n| Module     | Region        | Frequency     |\n| ---------- | ------------- | ------------- |\n| RAK3172(L) | Europe        | EU433         |\n|            | China         | CN470         |\n| RAK3172(H) | Europe        | EU868         |\n|            | North America | US915         |\n|            | Australia     | AU915         |\n|            | Korea         | KR920         |\n|            | Asia          | AS923-1/2/3/4 |\n|            | India         | IN865         |\n|            | Russia        | RU864         |\n\n#### Electrical Characteristics\n\n##### Operating Voltage\n\nPower is supplied to the RAK3172 Evaluation Board via USB (5¬†V) or a Li-Ion battery.\n\nThe LDO regulator can operate on the following voltage range:\n\n| Feature | Minimum | Maximum | Unit      |\n| ------- | ------- | ------- | --------- |\n| Vin     | 1.8     | 6.5     | Volts (V) |\n\n##### Schematic Diagram\n\n> **Image:** RAK3172 Evaluation Board Schematic Diagram\n\n#### Mechanical Characteristics\n\n##### Module Dimensions\n\n> **Image:** RAK3172 Physical Dimension\n\n#### Environmental Characteristics\n\n##### Operating Temperature\n\n| Feature               | Minimum | Typical | Maximum | Unit |\n| --------------------- | ------- | ------- | ------- | ---- |\n| Operating Temperature | -35     | 25      | 70      | ¬∞C   |\n\n### Software\n\nDownload the latest firmware for the RAK3172 WisDuo evaluation board provided below.  The RAK3172(L) and RAK3172(H) use the same firmware; it will automatically detect the module variant.\n\nThe **bin file** contains the application code only and you need the RAK DFU Tool to upload this file to the module.\n\nThe **hex file** contains both the bootloader and the application code. You need to use STM32CubeProgrammer to upload this.\n\n\n> **WARNING:** Uploading the `**.hex**` file via STM32CubeProgrammer will erase all configured data on the device.\n\n\nRAK3172 uses UART2's serial pins to upload the latest firmware.\n\n\n> **TIP:** NOTE\nRAK3172 should automatically go to BOOT mode when the firmware is being uploaded via RAK DFU Tool or WisToolBox.\n\nIf BOOT mode is not initiated, you can manually send `AT+BOOT` command to start bootloader mode.\n\n\n#### Firmware/OS\n\n| Model   | Version                                         | Source                                                                                          |\n| ------- | ----------------------------------------------- | ----------------------------------------------------------------------------------------------- |\n| RAK3172 | RUI3 (default baudrate = 115200)                |   [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-E_latest.bin)             |\n| RAK3172 | RUI3 (default baudrate = 115200)                |   [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-E_latest_final.hex)       |\n| RAK3172 | **DEPRECATED** V1.0.4 (default baudrate = 9600) | [Download](https://downloads.rakwireless.com/LoRa/RAK3172/Firmware/RAK3172_Latest_Firmware.zip) |\n\n\n> **WARNING:** There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n\nIf the host microcontroller code is based on this old firmware, we have a [RAK3172 AT Command migration guide](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3/) that explain in detail the few differences between the two AT commands set.\n\n\n### Certification\n\n\n> **TIP:** Note\nFor CE and FCC certifications we provide an AT command guide.    \nYou can find it in our [RUI3 documentation](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/certification-guide) or get it from our [Download Center](https://downloads.rakwireless.com/#RUI/RUI3/Certification%20Guide/).\n \n\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\datasheet.md","token_count":0}
{"id":"bd77ea7a0ae8157df0dda8f57788fed9","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"RAK3172 Evaluation Board Deprecated AT Command Manual","content":"# RAK3172 Evaluation Board Deprecated AT Command Manual\n\n\n> **WARNING:** **AT Commands (DEPRECATED) - FW version 1.0.4 and below.**\n- There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n- If the host microcontroller code is based on this old firmware, we have a [RAK3172 AT Command migration guide](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3/) that explains in detail the few differences between the two AT commands set.\n\n\nHere are the complete list of the old FW version of AT commands:\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\deprecated-at-command.md","token_count":120}
{"id":"4c05ddf12470204ddbe3451a401f32e0","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"AT Command Syntax and Formats for RAK3172 Evaluation Board","content":"## AT Command Syntax\n\nThe AT command is based on ASCII characters. In general, the AT Command starts with the prefix `AT` and ends with `<CR><LF>` (i.e. `\\r\\n`). For the rest of the document, the `\\r\\n` part is omitted for the sake of clarity.\n\nThe AT commands have the standard format `AT+XXX`, with XXX denoting the command.\n\nThere are four available command formats:\n\n| **AT COMMAND FORMAT**      | **Description**                                   |\n| -------------------------- | ------------------------------------------------- |\n| `AT+XXX?`                  | Provides a short description of the given command |\n| `AT+XXX=?`                 | Reading the current value on the command          |\n| `AT+XXX=<input parameter>` | Writing configuration on the command              |\n| `AT+XXX`                   | Used to run a command                             |\n\nThe output of the commands is returned via UART.\n\nThe format of the reply is divided into two parts: returned value and the status return code.\n\n\n> **TIP:** NOTE\n\n`<CR>` stands for ‚Äúcarriage return‚Äù and `<LF>` stands for ‚Äúline feed‚Äù.\n\n\n1. **`<value><CR><LF>`** is the first reply when (**`AT+XXX?`**) command description or (**`AT+XXX=?`**) reading value is executed then it will be followed by the status return code. The formats with no return value like (**`AT+XXX=<input parameter>`**) writing configuration command and (**`AT+XXX`**) run command will just reply to the status return code.\n\n2. **`<CR><LF><STATUS><CR><LF>`** is the second part of the reply which is the status return code.\n\nThe possible status codes are:\n\n| **STATUS RETURN CODE**   | **Description**                                      |\n| ------------------------ | ---------------------------------------------------- |\n| `OK`                     | Command executed correctly without error.            |\n| `AT_ERROR`               | Generic error or input is not supported.             |\n| `AT_PARAM_ERROR`         | The input parameter of the command is wrong.         |\n| `AT_BUSY_ERROR`          | The network is busy so the command is not completed. |\n| `AT_TEST_PARAM_OVERFLOW` | The parameter is too long.                           |\n| `AT_NO_NETWORK_JOINED`   | Module is not yet joined to a network.               |\n| `AT_RX_ERROR`            | Error detected during the reception of the command.  |\n| `AT_DUTYCYLE_RESTRICTED` | Duty cycle limited and cannot send data.             |\n\nMore details on each command description and examples are given in the remainder of this section.\n\n\n> **TIP:** NOTE\n\nOn the examples of AT Commands on this document, ATE is active therefore each input AT Command is printed before the return values and status return code.\n\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\deprecated-at-command.md","token_count":0}
{"id":"82a17b95b0ebce970811e7d2ab787e3c","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Reference","title":"Data Rate, TX Power, and Maximum Transmission Load by Region","content":"## Appendix\n\n### Appendix I: Data Rate by Region\n\n** EU433/EU868/RU864/AS923 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n| --------- | ------------------------- | ------------------------------------ |\n| 0         | LoRa: SF12 / 125¬†kHz | 250                                  |\n| 1         | LoRa: SF11 / 125¬†kHz | 440                                  |\n| 2         | LoRa: SF10 / 125¬†kHz | 980                                  |\n| 3         | LoRa: SF9 / 125¬†kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125¬†kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125¬†kHz  | 5470                                 |\n| 6         | LoRa: SF7 / 250¬†kHz  | 11000                                |\n| 7         | FSK: 50¬†kbps         | 50000                                |\n| 8 ~ 15    | RFU                       |                                      |\n\n** CN470/KR920 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n| --------- | ------------------------- | ------------------------------------ |\n| 0         | LoRa: SF12 / 125¬†kHz | 250                                  |\n| 1         | LoRa: SF11 / 125¬†kHz | 440                                  |\n| 2         | LoRa: SF10 / 125¬†kHz | 980                                  |\n| 3         | LoRa: SF9 / 125¬†kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125¬†kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125¬†kHz  | 5470                                 |\n| 6 ~ 15    | RFU                       |                                      |\n\n** US915 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n| --------- | ------------------------- | ------------------------------------ |\n| 0         | LoRa: SF10 / 125¬†kHz | 980                                  |\n| 1         | LoRa: SF9 / 125¬†kHz  | 1760                                 |\n| 2         | LoRa: SF8 / 125¬†kHz  | 3125                                 |\n| 3         | LoRa: SF7 / 125¬†kHz  | 5470                                 |\n| 4         | LoRa: SF8 / 500¬†kHz  | 12500                                |\n| 5 ~ 7     | RFU                       |                                      |\n| 8         | LoRa: SF12 / 500¬†kHz | 980                                  |\n| 9         | LoRa: SF11 / 500¬†kHz | 1760                                 |\n| 10        | LoRa: SF10 / 500¬†kHz | 3900                                 |\n| 11        | LoRa: SF9 / 500¬†kHz  | 7000                                 |\n| 12        | LoRa: SF8 / 500¬†kHz  | 12500                                |\n| 13        | LoRa: SF7 / 500¬†kHz  | 21900                                |\n| 14 ~ 15   | RFU                       |                                      |\n\n** AU915 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n| --------- | ------------------------- | ------------------------------------ |\n| 0         | LoRa: SF12 / 125¬†kHz | 250                                  |\n| 1         | LoRa: SF11 / 125¬†kHz | 440                                  |\n| 2         | LoRa: SF10 / 125¬†kHz | 980                                  |\n| 3         | LoRa: SF9 / 125¬†kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125¬†kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125¬†kHz  | 5470                                 |\n| 6         | LoRa: SF8 / 500¬†kHz  | 12500                                |\n| 7         | RFU                       | RFU                                  |\n| 8         | LoRa: SF12 / 500¬†kHz | 980                                  |\n| 9         | LoRa: SF11 / 500¬†kHz | 1760                                 |\n| 10        | LoRa: SF10 / 500¬†kHz | 3900                                 |\n| 11        | LoRa: SF9 / 500¬†kHz  | 7000                                 |\n| 12        | LoRa: SF8 / 500¬†kHz  | 12500                                |\n\n** IN865 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n| --------- | ------------------------- | ------------------------------------ |\n| 0         | LoRa: SF12 / 125¬†kHz | 250                                  |\n| 1         | LoRa: SF11 / 125¬†kHz | 440                                  |\n| 2         | LoRa: SF10 / 125¬†kHz | 980                                  |\n| 3         | LoRa: SF9 / 125¬†kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125¬†kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125¬†kHz  | 5470                                 |\n| 6         | RFU                       | RFU                                  |\n| 7         | FSK: 50¬†kbps         | 50000                                |\n| 8 ~ 15    | RFU                       | RFU                                  |\n\n### Appendix II: TX Power by Region\n\n** EU868 **\n\nBy default, MaxEIRP is considered to be +16¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8 ~ 15  | RFU                  |\n\n** US915 **\n\n| TXPower | Configuration (Conducted Power) |\n| ------- | ------------------------------- |\n| 0       | 30¬†dBm - 2*TXpower         |\n| 1       | 28¬†dBm                     |\n| 2       | 26¬†dBm                     |\n| 3 ~ 9   | -                               |\n| 10      | 10¬†dBm                     |\n| 11 ~ 15 | RFU                             |\n\n** AU915 **\n\nBy default, MaxEIRP is considered to be +30¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1 ~ 10  | MaxEIRP - 2*TXPower  |\n| 11 ~ 10 | RFU                  |\n\n** KR920 **\n\nBy default, MaxEIRP is considered to be +14¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8 ~ 15  | RFU                  |\n\n** AS923 **\n\nBy default, Max EIRP is considered to be 16¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8 ~ 15  | RFU                  |\n\n** IN865 **\n\nBy default, MaxEIRP is considered to be 30¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8       | MaxEIRP - 16¬†dB |\n| 9       | MaxEIRP - 18¬†dB |\n| 10      | MaxEIRP - 20¬†dB |\n| 11 ~ 15 | RFU                  |\n\n** RU864 **\n\nBy default, MaxEIRP is considered to be +16¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8 ~ 15  | RFU                  |\n\n** CN470 **\n\nBy default, MaxEIRP is considered to be +19.15¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP 2¬†dB    |\n| 2       | MaxEIRP 4¬†dB    |\n| 3       | MaxEIRP 6¬†dB    |\n| 4       | MaxEIRP 8¬†dB    |\n| 5       | MaxEIRP - 10¬†dB |\n| 6       | MaxEIRP - 12¬†dB |\n| 7       | MaxEIRP - 14¬†dB |\n| 8 ~ 15  | RFU                  |\n\n** EU433 **\n\nBy default, MAxEIRP is considered to be +12.15¬†dBm.\n\n| TXPower | Configuration (EIRP) |\n| ------- | -------------------- |\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2¬†dB  |\n| 2       | MaxEIRP - 4¬†dB  |\n| 3       | MaxEIRP - 6¬†dB  |\n| 4       | MaxEIRP - 8¬†dB  |\n| 5       | MaxEIRP - 10¬†dB |\n| 6 ~ 15  | RFU                  |\n\n### Appendix III: Maximum Transmission Load by Region\n\n\n> **TIP:** NOTE\nM in the following list is the length with MAC header, N is the maximum usable payload size for the user data without MAC header.\n\n\n** EU868 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** US915 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 19          | 11          |\n| 1         | 61          | 53          |\n| 2         | 133         | 125         |\n| 3         | 250         | 242         |\n| 4         | 250         | 242         |\n| 5 ~ 7     | Not Defined | Not Defined |\n| 8         | 61          | 53          |\n| 9         | 137         | 129         |\n| 10        | 250         | 242         |\n| 11        | 250         | 242         |\n| 12        | 250         | 242         |\n| 13        | 250         | 242         |\n| 14 ~ 15   | Not Defined | Not Defined |\n\n** AU915 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | Not Defined | Not Defined |\n| 8         | 61          | 53          |\n| 9         | 137         | 129         |\n| 10        | 250         | 242         |\n| 11        | 250         | 242         |\n| 12        | 250         | 242         |\n| 13        | 250         | 242         |\n| 14 ~ 15   | Not Defined | Not Defined |\n\n** KR920 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6 ~ 15    | Not Defined | Not Defined |\n\n** AS923 **\n\n| Data Rate | Uplink MAC Payload Size (M) | Downlink MAC Payload Size (M) |  |  |\n| --- | --- | --- | --- | --- |\n|  | UplinkDwellTime = 0 | UplinkDwellTime = 1 | DownlinkDwellTime = 0 | DownlinkDwellTime = 1 |\n| 0 | 59 | N/A | 59 | N/A |\n| 1 | 59 | N/A | 59 | N/A |\n| 2 | 59 | 19 | 59 | 19 |\n| 3 | 123 | 61 | 123 | 61 |\n| 4 | 250 | 133 | 250 | 133 |\n| 5 | 250 | 250 | 250 | 250 |\n| 6 | 250 | 250 | 250 | 250 |\n| 7 | 250 | 250 | 250 | 250 |\n| 8 | RFU | RFU | RFU | RFU |\n\n** IN865 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** RU864 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 230         | 222         |\n| 5         | 230         | 222         |\n| 6         | 230         | 222         |\n| 7         | 230         | 222         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** CN470 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6 ~ 15    | Not Defined | Not Defined |\n\n** EU433 **\n\n| Data Rate | M           | N           |\n| --------- | ----------- | ----------- |\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n### Appendix IV: Asynchronous Events\n\nThis section describes the output from UART lines of RAK3172 that can occur at any point in time while the device is operational.\n\n| Event                      | UART output         | Status description                                                                               |\n| -------------------------- | ------------------- | ------------------------------------------------------------------------------------------------ |\n| Beacon acquisition process | `+BC:`*< status >*  | `FAILED` - Beacon sync failed                                                                    |\n|                            |                     | `DONE` - Switch to classB mode                                                                   |\n|                            |                     | `LOST` - No Beacon received for 2 hours, switch to classA                                        |\n|                            |                     | `LOCKED` - Receive Beacon                                                                        |\n| Pingslot process           | `+PS:`*< status >*  | `DONE` - At this time, ping slots will be opened periodically. The modem is now in Class B mode. |\n| Class B/C downlink         | `+EVT:`*< status >* | `RX3/RXC, RSSI -110, SNR 5` - Indicates that data has been received on pingslot received window. |\n|                            |                     | `PortNumber:12345678` - Received binary data on PortNumber.                                      |\n|                            |                     | `UNICAST` - Let the host know that the Rx is in unicast Class B mode.                            |\n|                            |                     | `MULCAST MC1` - Data received in multicast group 1                                               |\n| Class A downlink           | `+EVT:`*< status >* | `RX1/RX2, RSSI -110, SNR 5`                                                                      |\n|                            |                     | `PortNumber:12345678` - Received binary data on PortNumber.                                      |\n| Join                       | `+EVT:`*< status >* | `JOIN FAILED`                                                                                    |\n|                            |                     | `JOINED`                                                                                         |\n| Confirm                    | `+EVT:`*< status >* | `SEND CONFIRMED OK`                                                                              |\n|                            |                     | `SEND CONFIRMED FAILED`                                                                          |\n| P2P                        | `+EVT:`*< status >* | `00112233` - Received binary data format data                                                    |\n|                            |                     | `RXP2P, RSSI -110, SNR 5` - Indicates that data has been received on P2P received window.        |\n| Link Check                 | `+EVT:`*< status >* | `LINKCHECK:Y0,Y1,Y2,Y3,Y4`                                                                       |\n|                            |                     | Y0 - represents link status (1:links success, 2: link fail)                                      |\n|                            |                     | Y1 - represents the DemodMargin                                                                  |\n|                            |                     | Y2 - represents the NbGateways                                                                   |\n|                            |                     | Y3 - represents the RSSI of the command‚Äôs download                                               |\n|                            |                     | Y4 - represents the SNR of the command‚Äôs download                                                |\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\deprecated-at-command.md","token_count":0}
{"id":"e8173027c041cdcce4163d3ee5f41a37","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"General","title":"RAK3172 Evaluation Board Overview","content":"# RAK3172 Evaluation Board\nThank you for choosing **RAK3172 Evaluation Board** in your awesome IoT Project! üéâ To help you get started, we have provided you all the necessary documentation for your product.\n\n* [Quick Start Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/)\n* [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/at-command-manual/)\n* [Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/datasheet/)\n* [RAK3172-E 3D Model](https://downloads.rakwireless.com/3D_File/WisDuo/3D_RAK3172-E.zip)\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\overview.md","token_count":0}
{"id":"a6de3975111832161363d6cb8e72854c","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Concept","title":"RAK3172-E Evaluation Board Overview","content":"## Product Description\n\nThe RAK3172-E is a WisDuo evaluation board for the RAK3172 module, using an STM32WLE5CCU6 SoC chip.  It is based on the RAK3372 WisBlock Core, compatible with the RAK5005-O base board. It provides easy access to the important pins of the RAK3172 module, simplifying development and testing. It also allows connection of other modules to the base board slots, enabling the building of complete IoT projects with integrated connectors for battery and solar panel, plus an onboard charging circuit.\n\nThis module complies with LoRaWAN 1.0.3 specifications (Classes A, B, and C). It also supports LoRa point-to-point (P2P) communication, facilitating the quick implementation of customized long-range LoRa networks.\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\overview.md","token_count":120}
{"id":"18f62756e3e740d413d0cbd054662aee","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"Concept","title":"RAK3172 Evaluation Board Product Features","content":"## Product Features\n\n- Based on **STM32WLE5CCU6**\n- **LoRaWAN 1.0.3** specification compliant\n- **Supported bands**: EU433, CN470, IN865, EU868, AU915, US915, KR920, RU864, and AS923-1/2/3/4\n- LoRaWAN activation by OTAA/ABP\n- LoRa Point-to-Point (P2P) communication\n- Easy-to-use AT command set via UART interface\n- Custom firmware using Arduino via RUI3 API\n- Long-range - greater than 15¬†km with optimized antenna\n- ARM Cortex-M4 32-bit\n- 256¬†kbytes flash memory with ECC\n- 64¬†kbytes RAM\n- **Supply Voltage**: 5¬†V via USB or 3.7-4.2¬†V using Li-Ion Battery\n- **Temperature Range**: -20¬∞¬†C ~ 70¬∞¬†C\n\n\n> **TIP:** Note\nFor CE and FCC certifications we provide an AT command guide.    \nYou can find it in our [RUI3 documentation](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/certification-guide) or get it from our [Download Center](https://downloads.rakwireless.com/#RUI/RUI3/Certification%20Guide/).\n \n\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\overview.md","token_count":150}
{"id":"6234077aa4427181fcbb9abd41e44139","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"How-To","title":"Prerequisites for RAK3172 Evaluation Board Installation","content":"## Prerequisites\n\nBefore proceeding with the installation guide for the RAK3172 Evaluation Board, ensure you have prepared the necessary items listed below:\n\n### Hardware\n\n- [RAK3172 Evaluation Board](https://store.rakwireless.com/products/evaluation-board-rak3172-e?utm_source=RAK3172EvaluationBoard&utm_medium=Document&utm_campaign=BuyFromStore)\n- Computer with a USB port\n- USB cable\n\n### Software\n\n- Download and install the [Arduino IDE](https://www.arduino.cc/en/Main/Software).\n\n\n> **WARNING:** _**If you are using Windows 10**_.\nDo _**NOT**_ install the Arduino IDE from the Microsoft App Store. Instead, install the original Arduino IDE from the Arduino official website. The Arduino app from the Microsoft App Store has problems using third-party Board Support Packages.\n\n\n- Add [RAK3172 as a supported board in Arduino IDE](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#rak3172-rui3-board-support-package-in-arduino-ide) by updating Board Manager URLs in **Preferences** settings of Arduino IDE with this JSON URL `https://raw.githubusercontent.com/RAKWireless/RAKwireless-Arduino-BSP-Index/main/package_rakwireless_com_rui_index.json`. After that, you can then add **RAKwireless RUI STM32 Boards** via Arduino board manager.\n- [RAK Serial Port Tool](https://downloads.rakwireless.com/#LoRa/Tools)\n\n\n> **TIP:** NOTE\n\n[CH340 USB-Serial Driver](https://www.arduined.eu/ch340-windows-10-driver-download/) must be installed manually for Windows 10 users having USB connection issues.\n\n\n#### List of Acronyms\n\n| Acronym | Definition                                       |\n| ------- | ------------------------------------------------ |\n| DFU     | Device Firmware Upgrade                          |\n| JTAG    | Joint Test Action Group                          |\n| LoRa    | Long Range                                       |\n| OTAA    | Over-The-Air-Activation                          |\n| ABP     | Activation-By-Personalization (ABP)              |\n| TTN     | The Things Network                               |\n| DEVEUI  | Device EUI (Extended Unique Identification)      |\n| APPEUI  | Application EUI (Extended Unique Identification) |\n| APPKEY  | Application Key                                  |\n| DEVADDR | Device Address                                   |\n| NWKSKEY | Network Session Key                              |\n| APPSKEY | Application Session Key                          |\n| P2P     | Point-to-Point                                   |\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\quickstart.md","token_count":0}
{"id":"f28b6b4b2752ef4b8c4f4bf7b2ef6aae","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"How-To","title":"Configuring RAK3172-E as a Stand-Alone Device Using RUI3","content":"## Product Configuration\n\n### RAK3172-E as a Stand-Alone Device Using RUI3\n\n#### Hardware Setup\n\nThe RAK3172-E requires a general-purpose computer USB port via a micro USB cable. You can use any serial communication tool, but it is recommended to use the [RAK Serial Port Tool](https://downloads.rakwireless.com/#LoRa/Tools).\n\n\n> **WARNING:** Firmware updates are done via the USB port. If connecting the module to an external device interfacing with USB, take extra precautions in your board design to ensure firmware updates remain possible.  The board design should allow disconnecting the external device from the RAK3172-E USB port before connecting the module to a PC for firmware updates.\n\nAlternatively, firmware can be updated using the SWD pins (SWCLK & SWDIO). This requires external tools like ST-LINK or RAKDAP1.\n\n\n> **Image:** RAK3172 Evaluation Board schematic\n\nEnsure that the antenna is properly connected for a good LoRa signal.  Also note that powering the module without an antenna connected to the IPEX connector may damage the chip's RF section.\n\n> **Image:** LoRa Antenna\n\nRAK3172-E has an IPEX connector where you can connect the LoRa antenna, as shown in **Figure 3**.\n\n> **Image:** IPEX Connector of RAK3172-E for LoRa Antenna\n\n\n> **TIP:** NOTE\nDetailed information about the RAK3172 LoRa antenna can be found on the [antenna datasheet](https://downloads.rakwireless.com/#LoRa/WisBlock/Accessories/).\n\n\n\n> **WARNING:** When using the LoRa transceiver, ensure that an antenna is always connected.  Using the transceiver without an antenna may damage the module.\n\n\n#### Software Setup\n\nThe default firmware of the RAK3172-E is based on RUI3, which allows you to develop custom firmware to connect sensors and other peripherals. To develop custom firmware using the Arduino IDE, first add RAKwireless RUI STM32 Boards in the Arduino board manager (as discussed in this guide).  Then, use RUI3 APIs for your application. You can upload the custom firmware via USB. The RAK3172's AT commands are still available even with custom firmware compiled via RUI3.  You can send AT commands via USB.\n\n##### RAK3172 RUI3 Board Support Package in Arduino IDE\n\nIf you don't have an Arduino IDE yet, you can download it on the [Arduino official website](https://www.arduino.cc/en/Main/Software) and follow the installation procedure in the [miscellaneous section](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#miscellaneous) of this document.\n\n\n> **TIP:** NOTE\n**For Windows 10 and up users**:\nIf your Arduino IDE is installed from the Microsoft App Store, you need to reinstall it from the official Arduino website.  The Arduino app from the Microsoft App Store has problems using third-party board support packages.\n\n\nOnce the Arduino IDE has been installed successfully, configure the IDE to add the RAK3172 in its board selection by following these steps.\n\n1. Open Arduino IDE and go to **File** > **Preferences**.\n\n> **Image:** Arduino preferences\n\n2. To add the RAK3172-E to your Arduino Boards list, edit the **Additional Board Manager URLs** and click the icon, as shown in **Figure 5**.\n\n> **Image:** Modifying Additional Board Manager URLs\n\n3. Copy the URL `https://raw.githubusercontent.com/RAKWireless/RAKwireless-Arduino-BSP-Index/main/package_rakwireless_com_rui_index.json` and paste it on the field, as shown in **Figure 6**. If there are other URLs already there, just add them on the next line. After adding the URL, click **OK**.\n\n> **Image:** Add additional board manager URLs\n\n4. Restart the Arduino IDE.\n5. Open the Boards Manager from Tools Menu.\n\n> **Image:** Opening Arduino boards manager\n\n6. Write **RAK** in the search bar, as shown in **Figure 8**. This will show the available RAKwireless module boards that you can add to your Arduino Board list. Select and install the latest version of the **RAKwireless RUI STM32 Boards**.\n\n> **Image:** Installing RAKwireless RUI STM32 boards\n\n7. Once the BSP is installed, select  **Tools** > **Boards Manager** > **RAKWireless RUI STM32 Modules** > **WisDuo RAK3172 Evaluation Board**. The RAK3172 Evaluation board uses RAK3172 WisDuo module.\n\n> **Image:** Selecting RAK3172 Evaluation Board\n\n##### Compile an Example with Arduino LED Breathing\n\n1. After completing the steps for adding your RAK3172 to the Arduino IDE, try a simple program to test your setup. Your RAK3172 evaluation board has two LEDs for testing.  These LEDs are near the reset button and USB connector, as shown in Figure 10.\n\n> **Image:** RAK3172 Evaluation Board LEDs\n\n2. Connect the RAK3172-E via USB and check RAK3172 COM Port using Windows **Device Manager**. Double-click the reset button if the module is not detected.\n\n> **Image:** Device manager ports (COM & LPT)\n\n3. Choose RAK3172-E on board selection select via **Tools** > **Boards Manager** > **RAKWireless RUI STM32 Modules** > **WisDuo RAK3172 Evaluation Board**.\n\n> **Image:** Selecting RAK3172 Evaluation Board\n\n4. Open **Tools** Menu and select a COM port. **COM28** is currently used.\n\n> **Image:** Select COM port\n\n5. You can see the serial monitor icon and click it to connect the COM port.\n\n> **Image:** Open Arduino serial monitor\n\n6. If the connection is successful, you can send AT Commands to RAK3172. For example: To check the RUI version, type `AT+VER=?` on the text area, then click on the **Send** button, as shown in **Figure 15**.\n\n> **Image:** Send AT command\n\n> **Image:** Arduino serial monitor COM28\n\n7. Open **Arduino_Led_Breathing** example code.\n\n> **Image:** Arduino Led Breathing example\n\n8. Click on the **Verify** icon to check if you have successfully compiled the example code.\n\n> **Image:** Verify the example code\n\n9. Click the **Upload** icon to send the compiled firmware to your RAK3172.\n\n\n> **TIP:** NOTE\nRAK3172-E should automatically go to BOOT mode when the firmware is uploaded via Arduino IDE.\n\nIf BOOT mode is not initiated, you can manually send `AT+BOOT` command to start bootloader mode.\n\n\n> **Image:** Upload the example code\n\n10. If the upload is successful, you will see the **Device programmed** message.\n\n> **Image:** Device programmed successfully\n\n11. After the Device Programmed is completed, you will see that LEDs are blinking.\n\n\n> **TIP:** NOTE\nMore examples for the RAK3172 can be found in the [RUI3-Best-Practices](https://github.com/RAKWireless/RUI3-Best-Practice) on Github.\n\n\n### RAK3172-E as a LoRa/LoRaWAN Modem via AT Command\n\n#### AT Command via the USB\n\nRAK3172 Evaluation Board can be configured using AT commands via the USB interface. Connect the RAK3172 evaluation board to your computer's USB port and a serial terminal tool. You can use the [RAK Serial Port Tool](https://downloads.rakwireless.com/#LoRa/Tools), so you can easily send AT commands and view the replies from the console output. The RAK Serial Port Tool commands still uses the RUI V2 AT commands by default. You can modify it to have RUI3 AT commands and then save it.\n\n\n> **WARNING:** Firmware update and AT command functionality are done via USB pins. If you will connect the module to an external host MCU that will send AT commands via USB, take extra precautions in your board design to ensure you can still perform FW update to it. There should be a way in your board design that can disconnect the host MCU UART to connect to RAK3172-E USB before connecting the module to the PC via USB for the FW update process.\n\nAn alternative option to update firmware aside from USB is to use SWD pins (SWCLK & SWDIO). This method will require you to use external tools like ST-LINK or RAKDAP1.\n\n\n#### Connect to the RAK3172 Evaluation Board\n\n1. Connect the RAK3172 evaluation board to the general-purpose computer USB port via a micro USB cable, as shown in **Figure 21**.\n\n> **Image:** RAK3172 EVB Connection\n\n2. Any serial communication tool can be used; but, it is recommended to use the [RAK Serial Port Tool](https://downloads.rakwireless.com/#LoRa/Tools).\n\n3. Configure the serial communication tool by selecting the proper port detected by the computer and configure the link as follows:\n\n * Baud Rate: **115200¬†baud**\n * Data Bits: **8¬†bits**\n * Stop Bits: **1¬†stop¬†bit**\n * Parity: **NONE**\n\n ##### RAK3172 Evaluation Board Configuration for LoRaWAN or LoRa P2P\n\nTo enable the RAK3172 module as a LoRa P2P module or a LoRaWAN end-device, the module must be configured and parameters must be set by sending AT commands. You can configure the RAK3172 in two ways:\n\n- [LoRaWAN End-Device](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#configuring-rak3172-e-as-lorawan-end-device) - RAK3172-E as LoRaWAN IoT device.\n- [LoRa P2P](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#lora-p2p-mode) - Point-to-point communication between two RAK3172 evaluation boards.\n\n#### Configure RAK3172-E as LoRaWAN End-Device\n\nTo enable the RAK3172-E breakout board as a LoRaWAN end-device, a device must be registered first in the LoRaWAN network server. This guide will cover both TTN and Chirpstack LoRaWAN network servers and the associate AT commands for the RAK3172-E.\n\nThis guide covers the following topics:\n\n- [TheThingsNetwork Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#connecting-to-the-things-network-ttn) - How to login, register new accounts and create new applications on TTN.\n- [RAK3172-E TTN OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#ttn-otaa-device-registration) - How to add OTAA device on TTN and what AT commands to use on RAK3172 OTAA activation.\n- [RAK3172-E TTN ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#ttn-abp-device-registration) - How to add ABP device on TTN and what AT commands to use on RAK3172 ABP activation.\n- [Chirpstack Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#connecting-with-chirpstack) - How to create new applications on Chirpstack.\n- [RAK3172-E Chirpstack OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#chirpstack-otaa-device-registration) - How to add OTAA device to Chirpstack and what AT commands to use on RAK3172 OTAA activation.\n- [RAK3172-E Chirpstack ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#chirpstack-abp-device-registration) - How to add ABP device on Chirpstack and what AT commands to use on RAK3172 ABP activation.\n\n##### Connect with The Things Network (TTN)\n\nIn this section, a quick tutorial guide will show how to connect the RAK3172 Evaluation Board to the TTN platform.\n\n\n> **TIP:** NOTE\n\nIn this guide, you need to have a working gateway that is connected to TTN or you have coverage of the TTN community network.\n\n\n> **Image:** RAK3172 in the context of the TTN\n\nAs shown in **Figure 22**, The Things Stack (TTN V3) is an open-source LoRaWAN Network Server suitable for global, geo-distributed public and private deployments as well as for small, local networks. The architecture follows the LoRaWAN Network Reference Model for standards compliance and interoperability. This project is actively maintained by [The Things Industries](https://www.thethingsindustries.com/).\n\nLoRaWAN is a protocol for low-power wide-area networks. It allows for large-scale Internet of Things deployments where low-powered devices efficiently communicate with internet-connected applications over long-range wireless connections.\n\nThe RAK3172 Evaluation Board can be part of this ecosystem as a device, and the objective of this section is to demonstrate how simple it is to send data to The Things Stack using the LoRaWAN protocol. To achieve this, the RAK3172 Evaluation Board must be located within the coverage of a LoRaWAN gateway connected to The Things Stack server.\n\n##### Registration to TTN and Creating LoRaWAN Applications\n\n1. The first step is to go to [The Things Network](https://www.thethingsnetwork.org/) and sign up an account shown in **Figure 23**. Then select a cluster as shown in **Figure 25**.\n\n> **Image:** Signing up an account in TTN\n\n> **Image:** Signing up an account in TTN\n\n> **Image:** Selecting Cluster in TTN\n\n> **Image:** Signing up through the Things ID\n\n> **Image:** Creation of an account through the Things ID\n\n> **Image:** Creation of an account through the Things ID\n\n You can use the same login credentials on the TTN V2 if you have one. If you have no account yet, you need to create one.\n\n2. Now that you are logged in to the platform, the next step is to create an application. Click **Create an application**.\n\n> **Image:** The Things Stack Platform\n\n> **Image:** Creating TTN application for your LoRaWAN devices\n\n3. To have an application registered, input first the specific details and necessary information about your application then click **Create application**.\n\n> **Image:** Details of the TTN application\n\n> **Image:** Details of the TTN application\n\n4. If you had no errors in the previous step, you should now be on the application console page. The next step is to add end devices to your TTN application.\n\nLoRaWAN specifications require that each end device be personalized and activated.  There are two options for registering devices, depending on the activation mode selected. Activation can be done via Over-the-Air Activation (OTAA) or Activation by Personalization (ABP).\n\n##### TTN OTAA Device Registration\n\n1. Go to your application console to register a device. To start adding an OTAA end-device, click **+ Register end device**, as shown in **Figure 33**.\n\n> **Image:** Register end device\n\n2. To register the board, click the **Enter end device specifics manually**.\n\n> **Image:** Enter end device specifics manually\n\n3. Next step is to set up **Frequency plan**, compatible **LoRaWAN version**, and **Regional Parameters version** supported. Then provide the **JoinEUI** credentials by entering zeroes into it.\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n4. Then click **Show advanced activation, LoRaWAN class and cluster settings**. Configure the activation mode by selecting **Over the air activation (OTAA)** and Additional LoRaWAN class capabilities to **class A only**. Then click **Confirm**.\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n5. Once done, provide the DevEUI credentials of your device into the **DevEUI** portion. This will automatically generate the specific End\ndevice ID of your board. Then click **Generate** under **AppKey** under Provisioning information section. Then click **Register end device**.\n\n\n> **TIP:** NOTE\n\n- The **AppEUI**, **DevEUI**, and **AppKey** are hidden in this section as these are unique from a specific device. The **DevEUI** credential is unique to every RAK3172 device. Also, you should generate your own **AppEUI** and **AppKey** credentials for your specific device and application.\n\n- The **AppEUI** is the same as **JoinEUI**.\n\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Register end device\n\n6. You should now be able to see the device on the TTN console after you fully register your device, as shown in **Figure 44**.\n\n\n> **TIP:** NOTE\n\n- The **AppEUI**, **DevEUI**, and **AppKey** are the parameters that you will need to activate your LoRaWAN end-device via OTAA. The **AppKey** is hidden by default for security reasons, but you can easily show it by clicking the show button. You can also copy the parameters quickly using the copy button.\n\n- The three OTAA parameters on the TTN device console are MSB by default.\n\n- These parameters are always accessible on the device console page, as shown in **Figure 36**.\n\n\n> **Image:** OTAA device successfully registered to TTN\n\n##### OTAA Configuration for TTN\n\nThe RAK3172 Evaluation Board can be configured using WisToolBox to perform OTAA configuration. **WisToolBox** is a software tool that supports the **RAK3172** module. It automatically detects the RAK3172 evaluation board once connected to a PC. Below are the options in WisToolBox for OTAA configuration.\n\n- [OTAA Configuration for TTN via WisToolBox UI](#otaa-configuration-for-ttn-via-wistoolbox-ui)\n- [OTAA Configuration for TTN via WisToolBox Console](#otaa-configuration-for-ttn-via-wistoolbox-console)\n\n##### OTAA Configuration for TTN via WisToolBox UI\n\nThe **RAK3172** should have correct OTAA credentials to connect to TTN. This can be done using **WisToolBox UI**. Below are the steps on setting up your **RAK3172** using **WisToolBox**.\n\n1. Connect your **RAK3172** with your chosen WisBlock base board to the PC via USB cable and open the **WisToolBox** application.\n\n2. Click **CONNECT DEVICE** button to launch the WisToolBox Dashboard.\n\n> **Image:** CONNECT DEVICE\n\n3. Then select your target port where your **RAK3172** is connected. Once recognized, click **CONNECT** as shown in **Figure 47**.\n\n> **Image:** Setting up your device\n\n> **Image:** Setting up your device\n\n4. Once done, **RAK3172** will appear in the dashboard then select it.\n\n> **Image:** Device seen from WisToolBox dashboard\n\n5. Then click **PARAMETERS** to do the configuration in your RAK3172.\n\n> **Image:** Setting up your device\n\n6. Click **Global settings** to set the network mode into **LoRaWAN** and join mode to **OTAA**. Make sure that the active region is using **EU868** for this configuration. If you wish to work on other regional band, you can choose among active regions based on your location.\n\n- LoRa network mode: **LoRaWAN**\n- LoRaWAN join mode: **OTAA**\n- LoRaWAN region: **EU868**\n\n> **Image:** Global settings\n\n> **Image:** Global settings\n\n7. Then click **LoRaWAN keys, ID, EUI** to configure the **Application EUI (AppEUI)**, **Application key (AppKey)** and **Device EUI (DevEUI)**.\n\n> **Image:** LoRaWAN keys, ID, EUI\n\n> **Image:** Setting up your device\n\n8. Then go back to console where your RAK3172 End device is created previously. Then copy all the credentials from there. Those will be the ones to be used also in the WisToolBox dashboard. Once encoded into the dashboard, click **APPLY COMMAND** to update your device as shown in **Figure 61**.\n\n\n> **TIP:** NOTE\n\n- The **AppEUI**, **DevEUI**, and **AppKey** are hidden in this section as these are unique from a specific device.\n\n\n> **Image:** Your created OTAA device from your console\n\n- **For Application EUI (AppEUI)**\n\n> **Image:** Copying the AppEUI credential from TTN to WisToolBox\n\n> **Image:** Copying the AppEUI credential from TTN to WisToolBox\n\n- **For Application key (AppKey)**\n\n> **Image:** Copying the AppKey credential from TTN to WisToolBox\n\n> **Image:** Copying the AppKey credential from TTN to WisToolBox\n\n- **For Device EUI (DevEUI)**\n\n> **Image:** Copying the DevEUI credential from TTN to WisToolBox\n\n> **Image:** Copying the DevEUI credential from TTN to WisToolBox\n\n- **WisToolBox Dashboard**\n\n> **Image:** Used credentials from your console in WisToolBox dashboard\n\n9. Once done, you will see the summary of commands that is applied to your device. Then click **CLOSE**.\n\n> **Image:** Summary of commands\n\n10. Now you will see it returns back to the dashboard with updated credentials of your device.\n\n> **Image:** Successfully configured OTAA device via WisToolBox dashboard\n\n11. After your device's credentials update, it can now join the network. To do this, you need to go to **Data on LoRa network** under **PARAMETERS**. Then click the **JOIN NETWORK** under **LoRaWAN join settings**. After a few seconds, it will notify you that your OTAA device already joined the TTN server. You can also to your TTN console if your device has successfully joined the TTN.\n\n> **Image:** Joining mode of your OTAA device\n\n> **Image:** OTAA device successfully joined the TTN server\n\n> **Image:** OTAA device successfully joined the TTN server\n\n##### OTAA Configuration for TTN via WisToolBox Console\n\nHere's another way of OTAA configuration using **WisToolBox Console**. Below are the steps on setting up your **RAK3172** using **WisToolBox Console**.\n\n1. Connect your **RAK3172** with your chosen WisBlock base board to the PC via USB cable and open the **WisToolBox** application.\n\n2. Click **CONNECT DEVICE** button to launch the WisToolBox Dashboard.\n\n> **Image:** CONNECT DEVICE\n\n3. Then select your target port where your **RAK3172** is connected. Once recognized, click **CONNECT** as shown in **Figure 69**.\n\n> **Image:** Setting up your device\n\n> **Image:** Setting up your device\n\n4. Once done, **RAK3172** will appear in the dashboard then select it.\n\n> **Image:** Device seen from WisToolBox dashboard\n\n5. Then click **ADVANCED**.\n\n> **Image:** Setting up your device\n\n6. Once done, click **OPEN CONSOLE** to do the configuration.\n\n> **Image:** OPEN CONSOLE\n\n> **Image:** Opening the Console terminal of WisToolBox\n\n> **Image:** Opening the Console terminal of WisToolBox\n\n7. To start the configuration, type **ATE** so you can echo the commands you input during your configuration. Then press **Enter**.\n\nIt is recommended to start by testing the console and verify that the current configuration is working by sending these two AT commands:\n\n```\nAT\n```\n\n```\nATE\n```\n\n`ATE` is useful for tracking the commands and troubleshooting.\n\nYou will receive `OK` when you input the two commands. After setting `ATE`, see all the commands you input together with the replies.\n\n\n> **TIP:** NOTE\n\nIf there is no `OK` or any reply, check if the device is powered correctly. If you are getting power from a USB port, ensure that you have a good USB cable.\n\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n8. Then configure the LoRaWAN join mode to **OTAA**. You can check what parameter you will input by typing **AT+NJM?** then **Enter** into the console terminal. For **OTAA**, you should input **AT+NJM=1** then press **Enter** as shown in **Figure 80**.\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n9. Once done, set-up your LoRaWAN region to EU868. You can check what parameter you will input by typing **AT+BAND?** then **Enter** into the console terminal. For **EU868**, you should input **AT+BAND=4** then press **Enter**. If you wish to work on other regional band, you may check the list of band parameter options below.\n\nSet the frequency/region to EU868.\n\n```\nAT+BAND=4\n```\n\n\n> **TIP:** NOTE\n\nDepending on the Regional Band you selected, you might need to configure the sub-band of your RAK3172 to match the gateway and LoRaWAN network server. This is especially important for Regional Bands like US915, AU915, and CN470.\n\nTo configure the masking of channels for the sub-bands, you can use the `AT+MASK` command that can be found on the [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/at-command-manual/#atmask).\n\nTo illustrate, you can use sub-band 2 by sending the command `AT+MASK=0002`.\n\n\n**List of band parameter options**\n\n| Code | Regional Band |\n| ---- | ------------- |\n| 0    | EU433         |\n| 1    | CN470         |\n| 2    | RU864         |\n| 3    | IN865         |\n| 4    | EU868         |\n| 5    | US915         |\n| 6    | AU915         |\n| 7    | KR920         |\n| 8    | AS923-1       |\n| 9    | AS923-2       |\n| 10   | AS923-3       |\n| 11   | AS923-4       |\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n10. Then next to this will be updating the OTAA credentials of your device. First to this will be the **Application EUI (AppEUI)**. Go back to your console where your RAK3172 End device was created to copy the AppEUI credential then paste it to the WisToolBox Console then press **Enter**.\n\n> **Image:** Your created OTAA device from your TTN console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the AppEUI credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n11. Once done, do the same procedure to **Application key (AppKey)** and **Device EUI (DevEUI)**.\n\n- **For Application key (AppKey)**\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the AppKey credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n- **For Device EUI (DevEUI)**\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the DevEUI credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n12. Once done, click **Dashboard** to check the updated credentials of your OTAA device. Click **PARAMETERS** to open the **Global Settings** and **LoRaWAN keys, ID, EUI** and check whether these portions are updated.\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** PARAMETERS\n\n> **Image:** Global settings and LoRaWAN keys, ID, EUI\n\n> **Image:** Global settings and LoRaWAN keys, ID, EUI details\n\n13. Now you have a configured OTAA device using WisToolBox Console. You can now join the network using the WisToolBox console.\n\n14. To do this, you need to go again to WisToolBox console and type **AT+JOIN**. Then edit it to **AT+JOIN=1** then press **Enter** to join the network.\n\n\n> **TIP:** NOTE\n`AT+JOIN` command parameters are optional. You can configure the settings for auto-join, reattempt interval, and the number of join attempts if your application needs it. If not configured, it will use the default parameter values.\n\n`AT+JOIN` and `AT+JOIN=1` also share the common functionality of trying to join the network.\n\n\nJoin command format: **`AT+JOIN=w:x:y:z`**\n\n| Parameter | Description                                                  |\n| --------- | ------------------------------------------------------------ |\n| w         | Join command - 1: joining, 0: stop joining.                  |\n| x         | Auto-join config - 1: auto-join on power-up, 0: no auto-join |\n| y         | Reattempt interval in seconds (7-255) - 8 is the default.    |\n| z         | Number of join attempts (0-255) - 0 is default.              |\n\nAfter 5 or 6 seconds, if the request is successfully received by a LoRa gateway, you should see `+EVT:JOINED` status reply, as shown in the figure below:\n\n\n> **TIP:** NOTE\n\nIf the OTAA device failed to join, you need to check if your device is within reach of a working LoRaWAN gateway that is configured to connect to TTN. It is also important to check that all your OTAA parameters (DEVEUI, APPEUI, and APPKEY) are correct using the `AT+DEVEUI=?`, `AT+APPEUI=?`, and `AT+APPKEY=?` commands. Lastly, ensure that the antenna of your device is properly connected.\n\nAfter checking all the things above, try to join again.\n\n\n> **Image:** Joining mode using WisToolBox Console\n\n> **Image:** Joining mode using WisToolBox Console\n\n> **Image:** Joining mode using WisToolBox Console\n\n> **Image:** Joining mode using WisToolBox Console\n\n> **Image:** OTAA device successfully joined the network\n\n> **Image:** OTAA device successfully joined the network\n\n15. With the end-device properly joined the TTN, try to send some payload after a successful join. Send command format: **`AT+SEND=<port>:<payload>`**\n\n```\nAT+SEND=2:12345678\n```\n\n> **Image:** OTAA device sending payload to the network\n\n> **Image:** OTAA device sending payload to the network\n\n> **Image:** OTAA device sending payload to the network\n\n> **Image:** OTAA device sending payload to the network\n\n16. You can see the data sent by the RAK3172 evaluation board on the TTN device console *Live data* section. Also, the *Last seen* info should be a few seconds or minutes ago.\n\n> **Image:** OTAA Test Sample Data Sent Viewed in TTN\n\n##### TTN ABP Device Registration\n\n1. To register an ABP device, go to your application console and select the application where you want your device to be added. Then click **+ Register end device**, as shown in **Figure 115**.\n\n> **Image:** Adding ABP Device\n\n2. To register the board, click the **Enter end device specifics manually**.\n\n> **Image:** Enter end device specifics manually\n\n3. Next step is to set up **Frequency plan**, compatible **LoRaWAN version**, and **Regional Parameters version** supported.\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n4. Then click **Show advanced activation, LoRaWAN class and cluster settings**. Configure the activation mode by selecting **Activation by personalization (ABP)** and Additional LoRaWAN class capabilities to **class A only**.\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n5. Once done, provide the DevEUI credentials of your device into the **DevEUI** portion. This will automatically generate the specific End\ndevice ID of your board. Then click **Generate** under **Device address**, **AppSKey** and **NwkSKey** under Provisioning information section. Then click **Register end device**.\n\n\n> **TIP:** NOTE\n\n- The **DevEUI**, **Device address**, **AppSKey**, and **NwkSKey** are hidden in this section as these are unique from a specific device. The **DevEUI** credential is unique to every RAK3172 device. Also, you should generate your own **Device address**, **AppSKey**, and **NwkSKey** credentials for your specific device and application.\n\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Setting up for your device\n\n> **Image:** Register end device\n\n6. You should now be able to see the device on the TTN console after you fully register your device, as shown in **Figure 128**.\n\n> **Image:** ABP device successfully registered to TTN\n\n##### ABP Configuration for TTN\n\nThe RAK3172 Evaluation Board can be configured using WisToolBox to do the ABP configuration. **WisToolBox** is a software tool that supports **RAK3172** module. It automatically detects RAK3172 evaluation board once connected to PC. Below are the options in WisToolBox that the ABP configuration can be done.\n\n- [ABP Configuration for TTN via WisToolBox UI](#abp-configuration-for-ttn-via-wistoolbox-ui)\n- [ABP Configuration for TTN via WisToolBox Console](#abp-configuration-for-ttn-via-wistoolbox-console)\n\n##### ABP Configuration for TTN via WisToolBox UI\n\nThe **RAK3172** should have correct ABP credentials to connect to TTN. This can be done using **WisToolBox**. Below are the steps on setting up your **RAK3172** using **WisToolBox**.\n\n1. Connect your **RAK3172** with your chosen WisBlock base board to the PC via USB cable and open the **WisToolBox** application.\n\n2. Click **CONNECT DEVICE** button to launch the WisToolBox Dashboard.\n\n> **Image:** CONNECT DEVICE\n\n3. Then select your target port where your **RAK3172** is connected. Once recognized, click **CONNECT** as shown in **Figure 131**.\n\n> **Image:** Setting up your device\n\n> **Image:** Setting up your device\n\n4. Once done, **RAK3172** will appear in the dashboard then select it.\n\n> **Image:** Device seen from WisToolBox dashboard\n\n5. Then click **PARAMETERS** to do the configuration in your RAK3172.\n\n\n> **TIP:** NOTE\n\n- The **AppSKey**, **Device address**, and **NwkSKey** are hidden in this section as these are unique from a specific device.\n\n\n> **Image:** Setting up your device\n\n 6. Click **Global settings** to set the network mode into **LoRaWAN** and join mode to **ABP**. Make sure that the active region is using **EU868** for this configuration. If you wish to work on other regional band, you can choose among active regions based on your location.\n\n- LoRa network mode: **LoRaWAN**\n- LoRaWAN join mode: **ABP**\n- LoRaWAN region: **EU868**\n\n> **Image:** Global settings\n\n> **Image:** Global settings\n\n7. Then click **LoRaWAN keys, ID, EUI** to configure the **Application session key (AppSKey)**, **Device address** and **Network session key (NwkSKey)**.\n\n> **Image:** LoRaWAN keys, ID, EUI\n\n> **Image:** Setting up your device\n\n8. Then go back to console where your RAK3172 End device is created previously. Then copy all the credentials from there. Those will be the ones to be used also in the WisToolBox dashboard. Once encoded into the dashboard, click **APPLY COMMANDS** to update your device as shown in **Figure 145**.\n\n\n> **TIP:** NOTE\n\n- The **AppSKey**, **Device address**, and **NwkSKey** are hidden in this section as these are unique from a specific device.\n\n\n> **Image:** Your created ABP device from your console\n\n- **For Application session key (AppSKey)**\n\n> **Image:** Copying the AppSKey credential from TTN to WisToolBox\n\n> **Image:** Copying the AppSKey credential from TTN to WisToolBox\n\n- **For Device address**\n\n> **Image:** Copying the Device address credential from TTN to WisToolBox\n\n> **Image:** Copying the Device address credential from TTN to WisToolBox\n\n- **For Network session key (NwkSKey)**\n\n> **Image:** Copying the NwkSKey credential from TTN to WisToolBox\n\n> **Image:** Copying the NwkSKey credential from TTN to WisToolBox\n\n- **WisToolBox Dashboard**\n\n> **Image:** Used credentials from your console in WisToolBox dashboard\n\n9. Once done, you will see the summary of commands that is applied to your device. Then click **CLOSE**.\n\n> **Image:** Summary of commands\n\n10. Now you will see it returns back to the dashboard with updated credentials of your device.\n\n> **Image:** Successfully configured ABP device via WisToolBox dashboard\n\n##### ABP Configuration for TTN via WisToolBox Console\n\nHere's another way of ABP configuration using **WisToolBox Console**. Below are the steps on setting up your **RAK3172** using **WisToolBox Console**.\n\n1. Connect your **RAK3172** with your chosen WisBlock base board to the PC via USB cable and open the **WisToolBox** application.\n\n2. Click **CONNECT DEVICE** button to launch the WisToolBox Dashboard.\n\n> **Image:** CONNECT DEVICE\n\n3. Then select your target port where your **RAK3172** is connected. Once recognized, click **CONNECT** as shown in **Figure 150**.\n\n> **Image:** Setting up your device\n\n> **Image:** Setting up your device\n\n4. Once done, **RAK3172** will appear in the dashboard then select it.\n\n> **Image:** Device seen from WisToolBox dashboard\n\n5. Then click **ADVANCED**.\n\n> **Image:** Setting up your device\n\n6. Once done, click **OPEN CONSOLE** to do the configuration.\n\n> **Image:** OPEN CONSOLE\n\n> **Image:** Opening the Console terminal of WisToolBox\n\n> **Image:** Opening the Console terminal of WisToolBox\n\n7. To start the configuration, type **ATE** so you can echo the commands you input during your configuration. Then press **Enter**.\n\nIt is recommended to start by testing the console and verify that the current configuration is working by sending these two AT commands:\n\n```\nAT\n```\n\n```\nATE\n```\n\n`ATE` is useful for tracking the commands and troubleshooting.\n\nYou will receive `OK` when you input the two commands. After setting `ATE`, see all the commands you input together with the replies.\n\n\n> **TIP:** NOTE\n\nIf there is no `OK` or any reply, check if the device is powered correctly. If you are getting power from a USB port, ensure that you have a good USB cable.\n\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n8. Then configure the LoRaWAN join mode to **ABP**. You can check what parameter you will input by typing **AT+NJM?** then **Enter** into the console terminal. For **ABP**, you should input **AT+NJM=0** then press **Enter** as shown in **Figure 161**.\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n9. Once done, set-up your LoRaWAN region to EU868. You can check what parameter you will input by typing **AT+BAND?** then **Enter** into the console terminal. For **EU868**, you should input **AT+BAND=4** then press **Enter**. If you wish to work on other regional band, you may check the list of band parameter options below.\n\nSet the frequency/region to EU868.\n\n```\nAT+BAND=4\n```\n\n\n> **TIP:** NOTE\n\nDepending on the Regional Band you selected, you might need to configure the sub-band of your RAK3172 to match the gateway and LoRaWAN network server. This is especially important for Regional Bands like US915, AU915, and CN470.\n\nTo configure the masking of channels for the sub-bands, you can use the `AT+MASK` command that can be found on the [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/at-command-manual/#atmask).\n\nTo illustrate, you can use sub-band 2 by sending the command `AT+MASK=0002`.\n\n\n**List of band parameter options**\n\n| Code | Regional Band |\n| ---- | ------------- |\n| 0    | EU433         |\n| 1    | CN470         |\n| 2    | RU864         |\n| 3    | IN865         |\n| 4    | EU868         |\n| 5    | US915         |\n| 6    | AU915         |\n| 7    | KR920         |\n| 8    | AS923-1       |\n| 9    | AS923-2       |\n| 10   | AS923-3       |\n| 11   | AS923-4       |\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n10. Then next to this will be updating the ABP credentials of your device. First to this will be the **Application session key (AppSKey)**. Go back to your console where your RAK3172 End device was created to copy the AppSKey credential then paste it to the WisToolBox Console then press **Enter**.\n\n> **Image:** Your created ABP device from your TTN console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the AppSKey credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n11. Once done, do the same procedure to **Device address** and **Network session key (NwkSKey)**.\n\n- **For Device address**\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the Device address credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n- **For Network session key (NwkSKey)**\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** Copying the NwkSKey credential from TTN to WisToolBox\n\n> **Image:** Setting up your Console\n\n12. Once done, click **Dashboard** to check the updated credentials of your ABP device. Click **PARAMETERS** to open the **Global Settings** and **LoRaWAN keys, ID, EUI** and check whether these portions are updated.\n\n> **Image:** Setting up your Console\n\n> **Image:** Setting up your Console\n\n> **Image:** PARAMETERS\n\n> **Image:** Global settings and LoRaWAN keys, ID, EUI\n\n> **Image:** Global settings and LoRaWAN keys, ID, EUI details\n\n13. Now you have a configured ABP device using WisToolBox Console. **ABP-configured devices** are directly tied to network once done with the above procedures so joining procedure is not needed.\n\n14. Now you can try sending payload to TTN. Open again the terminal console of WisToolBox to send some payload using it. Send command format: **`AT+SEND=<port>:<payload>`**\n\n```\nAT+SEND=2:12345678\n```\n\n> **Image:** ABP device sending payload to the network\n\n> **Image:** ABP device sending payload to the network\n\n> **Image:** ABP device sending payload to the network\n\n> **Image:** ABP device sending payload to the network\n\n15. You can see the data sent by the RAK3172 evaluation board on the TTN device console *Live data* section. Also, the *Last seen* info should be a few seconds or minutes ago.\n\n> **Image:** ABP Test Sample Data Sent Viewed in TTN\n\n##### Connecting with ChirpStack\n\nThis section shows how to connect the RAK3172 Evaluation Board to the ChirpStack platform.\n\n> **Image:** RAK3172 Evaluation board in the Context of the ChirpStack Platform\n\nThe ChirpStack or previously known as the LoRaServer project provides open-source components for building LoRaWAN networks. Like the case of TTN, the RAK3172 Evaluation Board is located in the periphery and will transmit the data to the backend servers through a LoRaWAN gateway. Learn more about [ChirpStack](https://www.chirpstack.io/).\n\n\n> **TIP:** NOTE\n\nIt is assumed that you are using RAK Gateway and its built-in ChirpStack. Also, the gateway with the ChirpStack must be configured successfully. For further information, check the RAK documents for more details.\n\n\n* In summary, these are the requirements:\n\n  1. Have ChirpStack online gateway, the frequency band of the nodes should be consistent with the frequency band of the gateway in use.\n      * [Connect the Gateway with Chirpstack](https://docs.rakwireless.com/product-categories/wisGate/rak7243/quickstart/#connect-the-gateway-with-chirpstack)\n  2.  The RAK Serial Port Tool provided by RAK\n  3.  RAK3172 Evaluation Board\n\n\n> **TIP:** NOTE\nThe frequency band used in the demonstration is EU868. Use a high-frequency version of RAK3172. The product number should be ‚Äú**RAK3172 (H)**‚Äù.\n\n\n##### Create a New Application\n\n1. Log in to the ChirpStack server using your account and password.\n\n2. Go to the Application section, as shown in **Figure 192**.\n\n> **Image:** Application Section\n\n3. By default, you should create a new application, although you can reuse the existing ones. For this setup, create a new Application by clicking on the ‚Äú**CREATE**‚Äù button, and filling the required parameters, as shown in **Figure 193** and **Figure 194**.\n\n> **Image:** Creating a New Application\n\n* For this setup, create an Application named ‚Äú**rak_node_test**‚Äù.\n\nChirpStack LoraServer supports multiple system configurations, with only one by default.\n\n* **Service profile**: The field is to select the system profile.\n* **Payload codec**: It is the parsing method for selecting load data such as parsing LPP format data.\n\n> **Image:** Filling Parameters of an Application\n\n**Register a New Device**\n\n1. Choose the **Application** created in the previous step, then select the **DEVICES** tab, as shown in **Figure 195** and **Figure 196**.\n\n2. Once done, click ‚Äú**+ CREATE**‚Äù.\n\n> **Image:** List of Applications Created\n\n> **Image:** Device Tab of an Application\n\n3. Once inside of the DEVICE tab, create a new device (LoRaWAN node) by clicking on the ‚Äú**+ CREATE**‚Äù button.\n\n> **Image:** Add a New Device\n\n> **Image:** Chirpstack Adding Node into the RAK3172 Module\n\n6. Once the node is created, fill in the necessary data. You can generate a Device EUI automatically by clicking the following icon, or you can write a correct Device EUI in the edit box.\n\nFill in the parameters requested:\n\n* **Device name and Device description**: These are descriptive texts about your device.\n\n* **Device EUI**: This interface allows you to generate a Device EUI automatically by clicking the generate icon. You can also add a specific Device EUI directly in the form.\n\n* **Device Profile**:\n  * If you want to join in OTAA mode, select ‚Äú**DeviceProfile_OTAA**‚Äù.\n  * If you want to join in ABP mode, select ‚Äú**DeviceProfile_ABP**‚Äù.\n\n\n> **TIP:** NOTE\n- Device profiles **DeviceProfile_OTAA** and **DeviceProfile_ABP** are only available if you are using the built-in Chirpstack LoRaWAN Server of RAK Gateways.\n\n- If you have your own Chirpstack installation, you can set up the device profile with **LoRaWAN MAC version 1.0.4** and **LoRaWAN Regional Parameters revision B** to make it compatible with RAK3172.\n\n\n> **Image:** Generate a New Device EUI \n\n##### Chirpstack OTAA Device Registration\n\n1. If you have selected ‚Äú**DeviceProfile_OTAA**‚Äù, as shown in **Figure 200**, then after the device is created, an Application Key must be also created for this device.\n\n> **Image:** Chirpstack OTAA Activation\n\n2. A previously created Application Key can be entered here, or a new one can be generated automatically by clicking the icon highlighted in red in **Figure 201**:\n\n> **Image:** Chirpstack OTAA Set Application Keys\n\n3. Once the Application Key is added to the form, the process can be finalized by clicking on the ‚Äú**SET DEVICE-KEYS**‚Äù button.\n\n* As shown in **Figure 202**, a new device should be listed in the DEVICES tab. The most important parameters, such as the Device EUI are shown in the summary.\n\n> **Image:** Chirpstack OTAA List of Device in the Device Tab\n\n4. To end the process, it is a good practice to review that the Application Key is properly associated with this device. The Application Key can be verified in the **KEYS(OTAA)** tab, as shown in **Figure 203**.\n\n> **Image:** Application Key Associated with the New Device\n\n\n> **TIP:** NOTE\n\nStandard OTAA mode requires the **Device EUI**, **Application Key**, and **Application EUI**, but in the ChirpStack‚Äôs implementation, only the Device EUI and the Application Key are mandatory. The Application EUI is not required and not recorded in the Application tab. Nevertheless, you can reuse the Device EUI as the Application EUI during the configuration on the side of the node.\n\n\n##### OTAA Configuration for Chirpstack\n\nThe RAK3172 Evaluation Board supports a series of AT commands to configure its internal parameters and control the functionalities of the board.\n\n1. To set up the RAK3172 Evaluation Board to join the Chirpstack using OTAA, start by connecting the RAK3172 Evaluation Board to the Computer (see **Figure 21**) and open the RAK Serial Port Tool. Select the right COM port and set the baud rate to 115200.\n\nIt is recommended to start by testing the serial communication and verify that the current configuration is working by sending these two AT commands:\n\n```\nAT\n```\n\n```\nATE\n```\n\n`ATE` will echo the commands you input to the board which is useful for tracking the commands and troubleshooting.\n\nYou will receive `OK` when you input the two commands. After setting `ATE`, see all the commands you input together with the replies. Try again `AT` and you should see it on the terminal followed by `OK`, as shown in **Figure 204**.\n\n\n> **TIP:** NOTE\n\nIf you haven't received an `OK` or any reply, you need to check if the wiring of your UART lines is correct and if the baud is correctly configured to 115200. Also, you can check if the device is powered correctly. If you are getting power from a USB port, ensure that you have a good USB cable.\n\n\n> **Image:** at+version command response\n\n2. The next step is to configure the OTAA LoRaWAN parameters in RAK3172:\n\n- LoRa work mode: **LoRaWAN**\n- LoRaWAN join mode: **OTAA**\n- LoRaWAN class: **Class A**\n- LoRaWAN region: **EU868**\n\nSet the work mode to LoRaWAN.\n\n```\nAT+NWM=1\n```\n\nSet the LoRaWAN activation to OTAA.\n\n```\nAT+NJM=1\n```\n\nSet the LoRaWAN class to Class A.\n\n```\nAT+CLASS=A\n```\n\nSet the frequency/region to EU868.\n\n```\nAT+BAND=4\n```\n\n\n> **TIP:** NOTE\n\n- Depending on the Regional Band you selected, you might need to configure the sub-band of your RAK3172 to match the gateway and LoRaWAN network server. This is especially important on Regional Bands like US915, AU915, and CN470.\n\n- To configure the masking of channels for the sub-bands, you can use the `AT+MASK` command that can be found on the [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/deprecated-at-command/#atmask).\n\n- To illustrate, you can use sub-band 2 by sending the command `AT+MASK=0002`.\n\n\n**List of band parameter options**\n\n| Code | Regional Band |\n| ---- | ------------- |\n| 0    | EU433         |\n| 1    | CN470         |\n| 2    | RU864         |\n| 3    | IN865         |\n| 4    | EU868         |\n| 5    | US915         |\n| 6    | AU915         |\n| 7    | KR920         |\n| 8    | AS923-1       |\n| 9    | AS923-2       |\n| 10   | AS923-3       |\n| 11   | AS923-4       |\n\n> **Image:** Configuring LoRa Parameters\n\n3. After the configuration of the LoRaWAN parameters, the next step is to set up the DevEUI and AppKey. You need the use the values from the Chirpstack device console.\n\n\n> **TIP:** NOTE\nThe Application EUI parameter is not required in the ChirpStack platform; therefore, it is possible to use the same id as the Device EUI.\n\n\n- Device EUI: **5E9D1E0857CF25F1**\n- Application EUI: **5E9D1E0857CF25F1**\n- Application Key: **F921D50CD7D02EE3C5E6142154F274B2**\n\nSet the Device EUI.\n\n```\nAT+DEVEUI=5E9D1E0857CF25F1\n```\n\nSet the Application EUI.\n\n```\nAT+APPEUI=5E9D1E0857CF25F1\n```\n\nSet the Application Key.\n\n```\nAT+APPKEY=F921D50CD7D02EE3C5E6142154F274B2\n```\n\n> **Image:** Configuring LoRa Parameters\n\n4. After EUI and key configuration, the device can now join the network and send some payload.\n\n```\nAT+JOIN=1:0:10:8\n```\n\nJoin command format: **`AT+JOIN=w:x:y:z`**\n\n| Parameter | Description                                                 |\n| --------- | ----------------------------------------------------------- |\n| w         | Join command - 1: joining, 0: stop joining.                 |\n| x         | Auto-join config - 1: auto-join on powerup, 0: no auto-join |\n| y         | Reattempt interval in seconds (7-255) - 8 is the default.   |\n| z         | Number of join attempts (0-255) - 0 is default.             |\n\n5. After 5 or 6 seconds, if the request is successfully received by a LoRaWAN gateway, then you should see JOINED status reply.\n\n\n> **TIP:** NOTE\n\n- If the OTAA device join failed, you need to check if your device is within reach of a working LoRaWAN gateway that is configured to connect to Chirpstack. It is also important to check that all your OTAA parameters (DEVEUI and APPKEY) are correct by using `AT+DEVEUI=?` and `AT+APPKEY=?` commands. Lastly, ensure that the antenna of your device is properly connected.\n\n- After checking all the things above, try to join again.\n\n\n6. With the end-device properly activated, try to send some payload after successful join.\n\n```\nAT+SEND=2:12345678\n```\n\nSend command format: **`AT+SEND=<port>:<payload>`**\n\n> **Image:** OTAA Test Sample Data Sent via RAK Serial Port Tool\n\n7. On the ChirpStack platform, you should see the join and uplink messages in the LORAWAN FRAMES tab, as shown in **Figure 208**. By convention, messages sent from nodes to gateways are considered as **Uplinks** while messages sent by gateways to nodes are considered as **Downlinks**.\n\n> **Image:** Chirpstack Data Received Preview\n\n##### Chirpstack ABP Device Registration\n\n1. During the registration of a new device, if you select ‚Äú**DeviceProfile_ABP**‚Äù, as shown in **Figure 209**, then the ChirpStack platform will assume that this device will join the LoRaWAN network using the ABP mode.\n\n\n> **TIP:** NOTE\n\nCheck ‚Äú**Disable counting frame verification**‚Äù. During the test, when the board is restarted, the frame counting number will be also be restarted from zero. This would cause a synchronization problem with the ChirpStack server treating it as a replay attack. For the testing purpose, it is safe to disable this feature, but remember to activate it in a production environment.\n\n\n> **Image:** ChirpStack Console, Configuring a Device\n\n2. After selecting the ABP mode, the following parameters appear in the Activation tab:\n\nThen, you can see that there are some parameters for ABP in the **‚ÄúACTIVATION‚Äù** item:\n\n  * **Device address**\n  * **Network Session Key**\n  * **Application Session Key**\n\n> **Image:** Chirpstack ABP Activation Parameters Needed\n\n3. The parameters can be generated as random numbers by the platform or can be set with user values. Once these parameters are filled in properly, the process is completed by clicking on the ‚Äú**ACTIVATE DEVICE**‚Äù button.\n\n##### ABP Configuration for Chirpstack\n\n1. To set up the RAK3172 Evaluation Board to join the Chirpstack using ABP, start by connecting the RAK3172 Evaluation Board to the Computer (see **Figure 21**) and open the RAK Serial Port Tool. Select the right COM port and set the baud rate to 115200.\n\nIt is recommended to start by testing the serial communication and verify that the current configuration is working by sending these two AT commands:\n\n```\nAT\n```\n\n```\nATE\n```\n\n`ATE` will echo the commands you input to the board which is useful for tracking the commands and troubleshooting.\n\nYou will receive `OK` when you input the two commands. After setting `ATE`, see all the commands you input together with the replies. Try again `AT` and you should see it on the terminal followed by `OK`, as shown in **Figure 211**.\n\n\n> **TIP:** NOTE\n\nIf you haven't received an `OK` or any reply, you need to check if the wiring of your UART lines is correct and if the baud is correctly configured to 115200. Also, you can check if the device is powered correctly. If you are getting power from a USB port, ensure that you have a good USB cable.\n\n\n> **Image:** at+version command response\n\n2. The next step is to configure the ABP LoRaWAN parameters in RAK3172:\n\n- LoRa work mode: **LoRaWAN**\n- LoRaWAN join mode: **ABP**\n- LoRaWAN class: **Class A**\n- LoRaWAN region: **EU868**\n\nSet the work mode to LoRaWAN. It can be set to P2P as well but by default, the device is in LoRaWAN mode.\n\n```\nAT+NWM=1\n```\n\nSet the LoRaWAN activation to ABP.\n\n```\nAT+NJM=0\n```\n\nSet the LoRaWAN class to Class A.\n\n```\nAT+CLASS=A\n```\n\nSet the frequency/region to EU868.\n\n```\nAT+BAND=4\n```\n\n\n> **TIP:** NOTE\n\nDepending on the Regional Band you selected, you might need to configure the sub-band of your RAK3172 to match the gateway and LoRaWAN network server. This is especially important on Regional Bands like US915, AU915, and CN470.\n\nTo configure the masking of channels for the sub-bands, you can use the `AT+MASK` command that can be found on the [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/deprecated-at-command/#atmask).\n\nTo illustrate, you can use sub-band 2 by sending the command `AT+MASK=0002`.\n\n\n**List of band parameter options**\n\n| Code | Regional Band |\n| ---- | ------------- |\n| 0    | EU433         |\n| 1    | CN470         |\n| 2    | RU864         |\n| 3    | IN865         |\n| 4    | EU868         |\n| 5    | US915         |\n| 6    | AU915         |\n| 7    | KR920         |\n| 8    | AS923-1       |\n| 9    | AS923-2       |\n| 10   | AS923-3       |\n| 11   | AS923-4       |\n\n> **Image:** Configuring LoRa Parameters\n\n3. After the configuration of the LoRaWAN parameters, the next step is to set up the device address and session keys. You need the use the values from the TTN device console.\n\n- Device Address: **26011AF9**\n- Application Session Key: **4D42EC5CAF97F03D833CDAf5003F69E1**\n- Network Session Key: **C280CB8D1DF688BC18601A97025C5488**\n\nSet the Device Address.\n\n```\nAT+DEVADDR=26011AF9\n```\n\nSet the Application Session Key.\n\n```\nAT+APPSKEY=4D42EC5CAF97F03D833CDAf5003F69E1\n```\n\nSet the Network Session Key.\n\n```\nAT+NWKSKEY=C280CB8D1DF688BC18601A97025C5488\n```\n\n> **Image:** Configuring LoRa Parameters\n\n4. After EUI and keys configuration, the device can now join the network and send some payload.\n\n```\nAT+JOIN=1:0:10:8\n```\n\nJoin command format: **`AT+JOIN=w:x:y:z`**\n\n| Parameter | Description                                                  |\n| --------- | ------------------------------------------------------------ |\n| w         | Join command - 1: joining, 0: stop joining.                  |\n| x         | Auto-join config - 1: auto-join on power-up, 0: no auto-join |\n| y         | Reattempt interval in seconds (7-255) - 8 is the default.    |\n| z         | Number of join attempts (0-255) - 0 is default.              |\n\n5. After 5 or 6 seconds, if the request was successfully received by a LoRaWAN gateway, then you should see JOINED status reply.\n\nYou can now try to send some payload after successful join.\n\n```\nAT+SEND=2:12341234\n```\nSend command format: **`AT+SEND=<port>:<payload>`**\n\n> **Image:** ABP Test Sample Data Sent via RAK Serial Port Tool\n\n#### LoRa P2P Mode\n\nThis section will show you how to set up and connect two RAK3172-E units to work in the LoRa P2P mode. The configuration of the RAK3172-E units is done by connecting the two modules to a general-purpose computer using a USB-UART converter. The setup of each RAK3172-E can be done separately, but testing the LoRa P2P mode will require having both units connected simultaneously. This could be done by having one computer with two USB ports or two computers with one USB port each.\n\nIt is recommended to start by testing the serial communication and verify the current configuration is working by sending these two AT commands:\n\n```\nAT\n```\n\n```\nATE\n```\n\n`ATE` will echo the commands you input to the module, which is useful for tracking the commands and troubleshooting.\n\nYou will receive `OK` when you input the two commands. After setting `ATE`, see all the commands you input together with the replies.\n\nTry again `AT` and you should see it on the terminal followed by `OK`.\n\n> **Image:** at+version command response\n\n1. On setting-up the RAK3172-E to work in LoRa P2P mode, you need to change the LoRa network work mode command on both RAK3172-E modules.\n\n```\nAT+NWM=0\n```\n`AT+NWM` parameter mode can be either 0=LoRa P2P or 1=LoRaWAN.\n\n> **Image:** P2P Mode\n\n\n> **TIP:** NOTE\n- The device will start automatically if you change modes from LoRaWAN to LoRa P2P and vice-versa.\n- You might need to input the `ATE` command again to ensure that your succeeding commands on P2P mode echo on the terminal.\n\n\n2. You need to input the P2P setup on both RAK3172-E modules. The parameters should be exactly the same on the two modules.\n\n```\nAT+P2P=868000000:7:125:0:10:14\n```\n\nFor this P2P setup, the LoRa parameters are the following:\n\n- Link frequency: **868000000¬†Hz**\n- Spreading factor: **7**\n- Bandwidth: **125¬†kHz**\n- Coding Rate: 0 = **4/5**\n- Preamble Length: **10**\n- Power: **14¬†dBm**\n\n\n> **TIP:** NOTE\nRefer to the P2P Mode section of the [AT command documentation](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/at-command-manual/) to learn more about the definition of the parameters used and the individual commands if you want specific parameter changed.\n\n\n> **Image:** Configuring P2P in both RAK3172-E Module\n\n3. To set one module as the receiver (RX), you need to set the value of the P2P receive command.\n\n\n> **TIP:** NOTE\nLoRa P2P default setting is Transmitter (TX) mode. This consumes lower power compared to Receiver (RX) mode where the radio is always listening for LoRa packets.\n\n\na. P2P LoRa RX configurable duration value is from 1 to 65533¬†ms. In this example, the device will listen and wait for LoRa P2P Packets for 30000¬†ms or 30¬†seconds. It will automatically disable RX mode and switch to TX mode after the timeout. If the device did not receive any packets within the time period, then the callback after timeout is `+EVT:RXP2P RECEIVE TIMEOUT`.\n\n```\nAT+PRECV=30000\n```\nb. If the `AT+PRECV` value is set to **65535**, the device will listen to P2P LoRa packets without a timeout, but it will stop listening once a P2P LoRa packet is received. After done receiving the packets, it will disable RX mode and automatically switch to TX mode again.\n\n```\nAT+PRECV=65535\n```\n\nc. If the `AT+PRECV` value is set to **65534**, the device will continuously listen to P2P LoRa packets without any timeout. The will continuously stay in RX mode until `AT+PRECV` is set to **0**.\n\n```\nAT+PRECV=65534\n```\n\nd. If the `AT+PRECV` value is set to **0**, the device will stop listening to P2P LoRa packets. It disables LoRa P2P RX mode and switch to TX mode.\n\n```\nAT+PRECV=0\n```\n\n4. With one module configured as Transmitter (TX) and the other device will be the Receiver (RX), try to send or transmit P2P payload data.\n\n```\nAT+PSEND= <payload>\n```\n\n> **TIP:** NOTE\n- `AT_PARAM_ERROR` is returned when setting wrong or malformed value.\n- `AT_BUSY_ERROR` is returned if the device is still in RX mode and you try to send or reconfigure RX period. If the `AT+PRECV` command is set to **65534**, you need to execute first `AT+PRECV=0` to be able to configure again the TX and RX state and avoid `AT_BUSY_ERROR`.\n- `<payload>`: 2 ~ 500 digit length, must be an even number of digits and character 0-9, a-f, A-F only, representing 1 ~ 256 hexadecimal numbers. For example, if the payload is like ` 0x03, 0xAA, 0x32`, therefore the AT command should be `AT+PSEND = 03AA32`.\n\n\n> **Image:** Configuring P2P in both RAK3172-E Module\n","keywords":["RAK3172-E","RUI3","Arduino IDE","firmware update","LoRa antenna","AT commands","board support package"],"source_file":"wisduo\\rak3172-evaluation-board\\quickstart.md","token_count":0}
{"id":"150188bedab2880b16b3449c1bfcc31e","product_family":"wisduo","product_id":"rak3172-evaluation-board","category":"How-To","title":"Firmware Upgrade and Arduino Installation for RAK3172 Evaluation Board","content":"## Miscellaneous\n### Upgrade the Firmware\n\nIf you want to upgrade to the latest version firmware of the board, you can follow this section. The latest firmware can be found in the software section of [RAK3172 Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/datasheet/#firmwareos).\n\n\n> **TIP:** NOTE\n\n**What if the RAK3172 module stops responding to AT commands and firmware update?**\n\nYou can recover your device by using the `.hex` file in the datasheet and uploading it using STM32CubeProgrammer. The guide on updating STM32 firmware using STM32CubeProgrammer can be found in the [Learn section](https://learn.rakwireless.com/hc/en-us/articles/26687606549911-How-To-Guide-STM32CubeProgrammer-for-RAK-Modules).\n\n\n\n> **WARNING:** Uploading the **`.hex`** file via STM32CubeProgrammer will erase all configured data on the device.\n\n\n#### Firmware Upgrade Through USB\n\n##### Minimum Hardware and Software Requirements\n\nRefer to the table for the minimum hardware and software required to perform the firmware upgrade via USB.\n\n| Hardware/Software | Requirement                                   |\n| ----------------- | --------------------------------------------- |\n| Computer          | A Windows/Ubuntu/Mac computer                 |\n| Firmware File     | Bin firmware file downloaded from the website |\n| Others            | A USB cable                                   |\n\n##### Firmware Upgrade Procedure\n\nExecute the following procedure to upgrade the firmware in Device Firmware Upgrade (DFU) mode through the USB interface.\n\n\n> **TIP:** NOTE\nRAK3172-E should automatically go to BOOT mode when the firmware is uploaded via RAK DFU Tool or WisToolBox.\n\nIf BOOT mode is not initiated, you can manually send `AT+BOOT` command to start bootloader mode.\n\n\n1.  Download the latest application firmware of the RAK3172.\n\n    - [RAK3172 Firmware](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/datasheet/#firmwareos)\n\n2.  Download the RAK Device Firmware Upgrade (DFU) tool.\n    - [RAK Device Firmware Upgrade (DFU) Tool](https://downloads.rakwireless.com/LoRa/Tools/RAK_Device_Firmware_Upgrade_tool/)\n\n3.  Connect the RAK3172 Evaluation Board with a computer through a USB cable. Refer to [**Figure 21**](https://docs.rakwireless.com/product-categories/wisduo/rak3172-evaluation-board/quickstart/#connect-to-the-rak3172-evaluation-board).\n\n4.  Open the Device Firmware Upgrade tool. Select the serial port and baud rate (115200) of the module and click the \"Select Port\" button.\n\n\n> **TIP:** NOTE\n\nIf your firmware upload always fail, check your current baudrate setting using `AT+BAUD=?` command and use that baud rate value in the RAK DFU Tool. You can also check if you selected the right COM port.\n\n\n> **Image:** Device Firmware Upgrade Tool\n\n5.  Select the application firmware file of the module with the suffix \"**.bin**\".\n\n> **Image:** Select firmware\n\n6.  Click the \"**Upgrade**\" button to upgrade the device. After the upgrade is complete, the RAK3372 will be ready to work with the new firmware.\n\n> **Image:** Firmware upgrading\n\n> **Image:** Upgrade successfull\n\n### Arduino Installation\n\nGo to the [Arduino official website](https://www.arduino.cc/en/Main/Software) and download the Arduino IDE. You can see the multiple versions available for Windows, Linux, and Mac OS X. Choose the correct version of Arduino IDE and download it.\n\n> **Image:** Arduino IDE latest version\n\n#### For Windows\n\n\n> **TIP:** NOTE\n**For Windows 10 users**:\nDo **NOT** install the Arduino IDE from the Microsoft App store. Install the original Arduino IDE from the Arduino official website instead, since the Arduino app from the Microsoft App Store has problems using third-party Board Support Packages.\n\n\n1. Install the Arduino IDE, which you just downloaded, on your Windows PC.\n\n2. Click **I Agree** then **Next** to proceed.\n\n> **Image:** Arduino setup license agreement\n\n> **Image:** Arduino setup installation options\n\n3. Click **Install**.\n\n> **Image:** Installing Arduino IDE\n\n> **Image:** Ongoing installation\n\nAfter 100% progress, the Arduino IDE has been installed successfully.\n\n> **Image:** Successful installation\n\n#### For Linux\n\nFirst, you need the check the compatibility with your system and choose between the 32-bit, 64-bit, and ARM versions of the Arduino IDE for Linux.\n\n##### Install via tarball\n\nAfter downloading the correct Arduino version, open a terminal, then run `ls` to check the installation file on the download folder.\n\n> **Image:** Check the download folder\n\nA tarball is a type of compressed folder, like a `.zip` file, commonly used to distribute software in Linux. To extract the files from the tarball, change the directory to where the downloaded tarball is, then run:\n\n`tar xvf arduino-version.xz`\n\n> **Image:** Tarball extract command\n\nWhen the tar command finishes, run `ls` again. A folder named  **arduino-version** will be created.\n\n> **Image:** Arduino install folder created\n\nChange the current directory and go to the newly created folder directory. There will be a file named `install.sh` in the folder. Execute `sudo ./install.sh` to install the Arduino IDE.\n\n> **Image:** Arduino install script running\n\nThe `sudo` command temporarily elevates privileges allowing the installer to complete sensitive tasks without logging in as the root user.\n\n#### For Mac OS X\n\nIn Mac OS X, the same as Linux, there is no installation process. It is just a process of decompression, then you can open Arduino IDE successfully.\n\n### Arduino IDE Parts Guide\n\n**Figure 233** shows the five (5) parts of Arduino IDE.\n\n> **Image:** Arduino IDE\n\n1. **IDE Option Menu**\n\nYou can configure some general parameters such as the serial port, the board information, the libraries, the edit parameters, and so on.\n\n2. **Operating Buttons**\n\nThe operating buttons have five operations:\n\n  - **Verify/Compile** the source code;\n  - **Upload** the compiled code into WisBlock;\n  - **Open** a **New** Arduino IDE window or existing application;\n  - **Save** the current application.\n\n> **Image:** Operating buttons\n\n3. **Code Area**\n\nYou can edit the source code, which will be compiled and uploaded into WisBlock later in this area.\n\n4. **State Area**\n\n5. **Output Message Area**\nYou can see the output message in this area, whether it's failure or success information.\n\n","keywords":[],"source_file":"wisduo\\rak3172-evaluation-board\\quickstart.md","token_count":0}
