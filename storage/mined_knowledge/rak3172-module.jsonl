{"id":"6440222adb56a3d2538c80b9a03a80a2","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 WisDuo Module AT Command Manual Introduction","content":"## Introduction\n\nThe RAK3172 WisDuo module is based on the STM32WLE5CC chip and is designed to simplify LoRaWAN and LoRa point-to-point (P2P) communication. To integrate LoRa technology into your projects, the RAK3172 is implemented with an easy-to-use UART communication interface where you can send AT commands. Through these AT commands, you can set the parameters needed for LoRa P2P and LoRaWAN communication. You can also use any microcontroller with a UART interface to control the RAK3172 module.\n\nThe UART serial communication is exposed on the UART2 (also identified as the **LPUART1 port**), through **Pin 2 (TX2)** and **Pin 1 (RX2)**. The default parameters of the UART2 communication are **115200 / 8-N-1**. The firmware upgrade is also possible through this port. To familiarize yourself with the pin distribution of this module and find a schematic circuit of a reference application, refer to the [RAK3172 Module Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/datasheet/#rak3172-wisduo-lpwan-module-datasheet).\n\n### Links to Quick Start Guide\n\nFor AT commands example usage, you can check these sections of the quick start guide:\n\n- [RAK3172 TTN OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/#ttn-otaa-device-registration) - How to add OTAA device on TTN and what AT commands to use on RAK3172 OTAA activation.\n- [RAK3172 TTN ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/#ttn-abp-device-registration) - How to add ABP device on TTN and what AT commands to use on RAK3172 ABP activation.\n- [RAK3172 Chirpstack OTAA Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/#chirpstack-otaa-device-registration) - How to add OTAA device to Chirpstack and what AT commands to use on RAK3172 OTAA activation.\n- [RAK3172 Chirpstack ABP Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/#chirpstack-abp-device-registration) - How to add ABP device on Chirpstack and what AT commands to use on RAK3172 ABP activation.\n- [LoRa P2P](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/#lora-p2p-mode) - Point to point communication between two RAK3172 modules.\n","keywords":[],"source_file":"wisduo\\rak3172-module\\at-command-manual.md","token_count":0}
{"id":"2aa1ea8e057448c6279baee6936a93d9","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"AT Commands List for RAK3172 Module","content":"## AT Commands List\n\nThere are two AT command sets for RAK3172, depending on the firmware uploaded to the device.\n\n1. [RUI3 AT Commands](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/at-command-manual/)\n\n\n> **TIP:** NOTE\nIn addition, aside on UART2, AT commands can also be interfaced via UART1 **Pin 4 (TX1)** and **Pin 5 (RX1)**. You can configure the settings of UART1 and UART2 interfaces via [RUI3 Serial Operating Modes](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/#rak-unified-interface-v3-rui3-serial-operating-modes).\n\n\n2. [AT Commands (DEPRECATED) - FW version 1.0.4 and below](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/at-command-manual/)\n\n\n> **WARNING:** - There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n- If the host microcontroller code is based on this old firmware, we have a [RAK3172 AT Command migration guide](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3) that explain in detail the few differences between the two AT commands set.\n\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\at-command-manual.md","token_count":0}
{"id":"ec3fcae503ae1393f7dbbad5daf8ab46","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 Module Overview and Features","content":"## Overview\n\n### Description\n\nThe RAK3172 is a low-power, long-range transceiver module based on the STM32WLE5CC chip. It offers an easy-to-use, compact, and low-power solution for long-range wireless data applications. This module complies with Class A, B, and C of the LoRaWAN 1.0.3 specifications. It can effortlessly connect to various LoRaWAN server platforms, including TheThingsNetwork (TTN), Chirpstack, Actility, etc. Additionally, it supports LoRa Point-to-Point (P2P) communication mode, enabling the rapid implementation of customized long-range LoRa networks.\n\nYou can configure the module's mode and operation using AT commands via a UART interface. RAK3172 also offers low-power features, making it well-suited for battery-powered applications.\n\n### Features\n\n- Based on **STM32WLE5CCU6**\n- **LoRaWAN 1.0.3** specification compliant\n- **Supported bands**: EU433, CN470, IN865, EU868, AU915, US915, KR920, RU864, and AS923-1/2/3/4\n- LoRaWAN activation via OTAA/ABP\n- LoRa Point-to-Point (P2P) communication\n- Custom firmware using Arduino via RUI3 API\n- Easy to use AT command set via UART interface\n- Long-range - greater than 15 km with optimized antenna\n- ARM Cortex-M4 32-bit\n- 256 kbytes flash memory with ECC\n- 64 kbytes RAM\n- Ultra-low-power consumption of 1.69 μA in sleep mode\n- **Supply Voltage**: 2.0 V ~ 3.6 V\n- **Temperature Range**:\n  - **RAK3172**: -20° C ~ 85° C\n  - **RAK3172-T**: -40° C ~ 85° C\n\n\n> **TIP:** NOTE\nThere are two certification variants available for the RAK3172 Module: (1) with the CE & UKCA Certification Mark and (2) with FCC, IC, & RCM Certification Mark.\n\nIf you need a LoRa module with BLE 5.0 capability, you can check out the [RAK11720](https://store.rakwireless.com/products/rak11720-ambiq-apollo3-module-for-lorawan?utm_source=RAK11720&utm_medium=Document&utm_campaign=BuyFromStore). The RAK11720 is pin-to-pin compatible with the RAK3172 and has additional pins for ground and a BLE RF antenna port.\n\n\n\n> **WARNING:** Temperature ratings:\n\n**RAK3172** is -20° C to 85° C\n\n**RAK3172-T** is -40° C to 85° C\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\datasheet.md","token_count":0}
{"id":"02781b01981d4f276138e55723390c37","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 Module Models and Ordering Information","content":"## Models and Bundles\n\n### Ordering Information\n\n| P/N                 | Model      | TCXO                    | Antenna Interface | Frequency                           | SKU    |\n| ------------------- | ---------- | ----------------------- | ----------------- | ----------------------------------- | ------ |\n| RAK3172-8-SM-NI     | RAK3172    | Without TCXO            | No IPEX           | 8XX MHz for RU864/IN865/EU868       | 305044 |\n| RAK3172-9-SM-NI     | RAK3172    | Without TCXO            | No IPEX           | 9XX MHz for US915/AU915/KR920/AS923 | 306041 |\n| RAK3172-9-SM-NI     | RAK3172    | Without TCXO            | No IPEX           | AS923-1 Japan                       | 309044 |\n| RAK3172-43-SM-NI    | RAK3172    | Without TCXO            | No IPEX           | EU433                               | 301026 |\n| RAK3172-47-SM-NI    | RAK3172    | Without TCXO            | No IPEX           | CN470                               | 302033 |\n| RAK3172-T-8-SM-NI   | RAK3172-T  | With ±2.5 ppm TCXO | No IPEX           | 8XX MHz for RU864/IN865/EU868       | 305054 |\n| RAK3172-T-9-SM-NI   | RAK3172-T  | With ±2.5 ppm TCXO | No IPEX           | 9XX MHz for US915/AU915/KR920/AS923 | 306051 |\n| RAK3172-T-9-SM-NI   | RAK3172-T  | With ±2.5 ppm TCXO | No IPEX           | AS923-1 Japan                       | 309054 |\n| RAK3172-T-43-SM-NI  | RAK3172-T  | With ±2.5 ppm TCXO | No IPEX           | EU433                               | 301029 |\n| RAK3172-T-47-SM-NI  | RAK3172-T  | With ±2.5 ppm TCXO | No IPEX           | CN470                               | 302037 |\n| RAK3172-TE-8-SM-NI  | RAK3172-TE | With ±0.5 ppm TCXO | No IPEX           | 8XX MHz for RU864/IN865/EU868       | 305058 |\n| RAK3172-TE-9-SM-NI  | RAK3172-TE | With ±0.5 ppm TCXO | No IPEX           | 9XX MHz for US915/AU915/KR920/AS923 | 306055 |\n| RAK3172-TE-9-SM-NI  | RAK3172-TE | With ±0.5 ppm TCXO | No IPEX           | AS923-1 Japan                       | 309057 |\n| RAK3172-TE-43-SM-NI | RAK3172-TE | With ±0.5 ppm TCXO | No IPEX           | EU433                               | -      |\n| RAK3172-TE-47-SM-NI | RAK3172-TE | With ±0.5 ppm TCXO | No IPEX           | CN470                               | -      |\n| RAK3172-8-SM-I      | RAK3172    | Without TCXO            | With IPEX         | 8XX MHz for RU864/IN865/EU868       | 305045 |\n| RAK3172-9-SM-I      | RAK3172    | Without TCXO            | With IPEX         | 9XX MHz for US915/AU915/KR920/AS923 | 306042 |\n| RAK3172-9-SM-I      | RAK3172    | Without TCXO            | With IPEX         | AS923-1 Japan                       | 309045 |\n| RAK3172-43-SM-I     | RAK3172    | Without TCXO            | With IPEX         | EU433                               | 301025 |\n| RAK3172-47-SM-I     | RAK3172    | Without TCXO            | With IPEX         | CN470                               | 302032 |\n| RAK3172-T-8-SM-I    | RAK3172-T  | With ±2.5 ppm TCXO | With IPEX         | 8XX MHz for RU864/IN865/EU868       | 305055 |\n| RAK3172-T-9-SM-I    | RAK3172-T  | With ±2.5 ppm TCXO | With IPEX         | 9XX MHz for US915/AU915/KR920/AS923 | 306052 |\n| RAK3172-T-9-SM-I    | RAK3172-T  | With ±2.5 ppm TCXO | With IPEX         | AS923-1 Japan                       | 309055 |\n| RAK3172-T-43-SM-I   | RAK3172-T  | With ±2.5 ppm TCXO | With IPEX         | EU433                               | 301030 |\n| RAK3172-T-47-SM-I   | RAK3172-T  | With ±2.5 ppm TCXO | With IPEX         | CN470                               | 302038 |\n| RAK3172-TE-8-SM-I   | RAK3172-TE | With ±0.5 ppm TCXO | With IPEX         | 8XX MHz for RU864/IN865/EU868       | 305057 |\n| RAK3172-TE-9-SM-I   | RAK3172-TE | With ±0.5 ppm TCXO | With IPEX         | 9XX MHz for US915/AU915/KR920/AS923 | 306054 |\n| RAK3172-TE-9-SM-I   | RAK3172-TE | With ±0.5 ppm TCXO | With IPEX         | AS923-1 Japan                       | 309056 |\n| RAK3172-TE-43-SM-I  | RAK3172-TE | With ±0.5 ppm TCXO | With IPEX         | EU433                               | -      |\n| RAK3172-TE-47-SM-I  | RAK3172-TE | With ±0.5 ppm TCXO | With IPEX         | CN470                               | -      |\n","keywords":[],"source_file":"wisduo\\rak3172-module\\datasheet.md","token_count":0}
{"id":"5dce90e0f1eb9bb4c3d60f27f57f25fa","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 Module Certification Documents","content":"## Certification\n\n### Certifications\n- **ANATEL:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_ANATEL_Certification.pdf\n- **CE:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_CE_Certification.pdf\n- **FCC:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_FCC_Certification.zip\n- **ISED:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_ISED_Certification.pdf\n- **JRL:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_JRL_Certfication.pdf\n- **KC:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_KC_Certification.pdf\n- **LORAWAN:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_Lora_Alliance_Certification.pdf\n- **RCM:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_RCM_Certification.pdf\n- **REACH:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_REACH_Report.pdf\n- **ROHS:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_RoHS_Report.pdf\n- **RSM:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_RSM_Certification.pdf\n- **UKCA:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_UKCA_Certification.pdf\n- **WPC:** https://downloads.rakwireless.com/LoRa/RAK3172/Certification/RAK3172_WPC_Certification.pdf\n\n\n> **TIP:** Note\nFor CE and FCC certifications we provide an AT command guide.    \nYou can find it in our [RUI3 documentation](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/certification-guide) or get it from our [Download Center](https://downloads.rakwireless.com/#RUI/RUI3/Certification%20Guide/).\n \n\n","keywords":["certification","ANATEL","CE","FCC","ISED","JRL","KC","LoRaWAN","RCM","REACH","ROHS","RSM","UKCA","WPC"],"source_file":"wisduo\\rak3172-module\\datasheet.md","token_count":0}
{"id":"5921b61ae84a6566b0ec98f0f9285833","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 WisDuo LoRaWAN Module Deprecated AT Command Manual","content":"# RAK3172 WisDuo LoRaWAN Module Deprecated AT Command Manual\n\n\n> **WARNING:** **AT Commands (DEPRECATED) - FW version 1.0.4 and below.**\n- There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n- If the host microcontroller code is based on this old firmware, we have a [RAK3172 AT Command migration guide](https://docs.rakwireless.com/Knowledge-Hub/Learn/AT-Migration-Guide/) that explains in detail the few differences between the two AT commands set.\n\n\nHere are the complete list of the old FW version of AT commands:\n","keywords":[],"source_file":"wisduo\\rak3172-module\\deprecated-at-command.md","token_count":100}
{"id":"154305c8445b52f807ef22bd964c78d9","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"Deprecated AT Commands for RAK3172 Module","content":"## Content\n\n  - [General Commands](#general-commands)\n  - [Keys, IDs, and EUIs Management](#keys-ids-and-euis-management)\n  - [Joining and Sending Data to LoRaWAN Network](#joining-and-sending-data-to-lorawan-network)\n  - [LoRaWAN Device Configuration](#lorawan-device-configuration)\n  - [Class B Mode](#class-b-mode)\n  - [Device Information](#device-information)\n  - [RF Test](#rf-test)\n  - [P2P Mode](#p2p-mode)\n  - [Multicast Group](#multicast-group)\n  - [Data Transparent Transmission](#data-transparent-transmission)\n  - [Appendix](#appendix)\n","keywords":[],"source_file":"wisduo\\rak3172-module\\deprecated-at-command.md","token_count":0}
{"id":"496eb10d5e3b1eb83ff2c5796620d975","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"AT Command Syntax and Formats for RAK3172 Module","content":"## AT Command Syntax\n\nThe AT command is based on ASCII characters. In general, the AT Command starts with the prefix `AT` and ends with `<CR><LF>` (i.e. `\\r\\n`). For the rest of the document, the `\\r\\n` part is omitted for the sake of clarity.\n\nThe AT commands have the standard format `AT+XXX`, with XXX denoting the command.\n\nThere are four available command formats:\n\n| **AT COMMAND FORMAT**      | **Description**                                   |\n|----------------------------|---------------------------------------------------|\n| `AT+XXX?`                  | Provides a short description of the given command |\n| `AT+XXX=?`                 | Reading the current value on the command          |\n| `AT+XXX=<input parameter>` | Writing configuration on the command              |\n| `AT+XXX`                   | Used to run a command                             |\n\nThe output of the commands is returned via UART.\n\nThe format of the reply is divided into two parts: returned value and the status return code.\n\n\n> **TIP:** NOTE\n\n`<CR>` stands for “carriage return” and `<LF>` stands for “line feed”.\n\n\n1. **`<value><CR><LF>`** is the first reply when (**`AT+XXX?`**) command description or (**`AT+XXX=?`**) reading value is executed then it will be followed by the status return code. The formats with no return value like (**`AT+XXX=<input parameter>`**) writing configuration command and (**`AT+XXX`**) run command will just reply to the status return code.\n\n2. **`<CR><LF><STATUS><CR><LF>`** is the second part of the reply which is the status return code.\n\nThe possible status codes are:\n\n| **STATUS RETURN CODE**   | **Description**                                      |\n|--------------------------|------------------------------------------------------|\n| `OK`                     | Command executed correctly without error.            |\n| `AT_ERROR`               | Generic error or input is not supported.             |\n| `AT_PARAM_ERROR`         | The input parameter of the command is wrong.         |\n| `AT_BUSY_ERROR`          | The network is busy so the command is not completed. |\n| `AT_TEST_PARAM_OVERFLOW` | The parameter is too long.                           |\n| `AT_NO_NETWORK_JOINED`   | Module is not yet joined to a network.               |\n| `AT_RX_ERROR`            | Error detected during the reception of the command.  |\n| `AT_DUTYCYLE_RESTRICTED` | Duty cycle limited and cannot send data.             |\n\nMore details on each command description and examples are given in the remainder of this section.\n\n\n> **TIP:** NOTE\n\nOn the examples of AT Commands on this document, ATE is active therefore each input AT Command is printed before the return values and status return code.\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\deprecated-at-command.md","token_count":0}
{"id":"82f9c2d3d387896742f8f66c0a1abea5","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"Data Rate, TX Power, and Maximum Transmission Load by Region","content":"## Appendix\n\n### Appendix I：Data Rate by Region\n\n** EU433/EU868/RU864/AS923 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n|-----------|---------------------------|--------------------------------------|\n| 0         | LoRa: SF12 / 125 kHz | 250                                  |\n| 1         | LoRa: SF11 / 125 kHz | 440                                  |\n| 2         | LoRa: SF10 / 125 kHz | 980                                  |\n| 3         | LoRa: SF9 / 125 kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125 kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125 kHz  | 5470                                 |\n| 6         | LoRa: SF7 / 250 kHz  | 11000                                |\n| 7         | FSK: 50 kbps         | 50000                                |\n| 8 ~ 15    | RFU                       |                                      |\n\n** CN470/KR920 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n|-----------|---------------------------|--------------------------------------|\n| 0         | LoRa: SF12 / 125 kHz | 250                                  |\n| 1         | LoRa: SF11 / 125 kHz | 440                                  |\n| 2         | LoRa: SF10 / 125 kHz | 980                                  |\n| 3         | LoRa: SF9 / 125 kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125 kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125 kHz  | 5470                                 |\n| 6 ~ 15    | RFU                       |                                      |\n\n** US915 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n|-----------|---------------------------|--------------------------------------|\n| 0         | LoRa: SF10 / 125 kHz | 980                                  |\n| 1         | LoRa: SF9 / 125 kHz  | 1760                                 |\n| 2         | LoRa: SF8 / 125 kHz  | 3125                                 |\n| 3         | LoRa: SF7 / 125 kHz  | 5470                                 |\n| 4         | LoRa: SF8 / 500 kHz  | 12500                                |\n| 5 ~ 7     | RFU                       |                                      |\n| 8         | LoRa: SF12 / 500 kHz | 980                                  |\n| 9         | LoRa: SF11 / 500 kHz | 1760                                 |\n| 10        | LoRa: SF10 / 500 kHz | 3900                                 |\n| 11        | LoRa: SF9 / 500 kHz  | 7000                                 |\n| 12        | LoRa: SF8 / 500 kHz  | 12500                                |\n| 13        | LoRa: SF7 / 500 kHz  | 21900                                |\n| 14 ~ 15   | RFU                       |                                      |\n\n** AU915 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n|-----------|---------------------------|--------------------------------------|\n| 0         | LoRa: SF12 / 125 kHz | 250                                  |\n| 1         | LoRa: SF11 / 125 kHz | 440                                  |\n| 2         | LoRa: SF10 / 125 kHz | 980                                  |\n| 3         | LoRa: SF9 / 125 kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125 kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125 kHz  | 5470                                 |\n| 6         | LoRa: SF8 / 500 kHz  | 12500                                |\n| 7         | RFU                       | RFU                                  |\n| 8         | LoRa: SF12 / 500 kHz | 980                                  |\n| 9         | LoRa: SF11 / 500 kHz | 1760                                 |\n| 10        | LoRa: SF10 / 500 kHz | 3900                                 |\n| 11        | LoRa: SF9 / 500 kHz  | 7000                                 |\n| 12        | LoRa: SF8 / 500 kHz  | 12500                                |\n\n** IN865 **\n\n| Data Rate | Configuration             | Indicative Physical Bit Rate [bit/s] |\n|-----------|---------------------------|--------------------------------------|\n| 0         | LoRa: SF12 / 125 kHz | 250                                  |\n| 1         | LoRa: SF11 / 125 kHz | 440                                  |\n| 2         | LoRa: SF10 / 125 kHz | 980                                  |\n| 3         | LoRa: SF9 / 125 kHz  | 1760                                 |\n| 4         | LoRa: SF8 / 125 kHz  | 3125                                 |\n| 5         | LoRa: SF7 / 125 kHz  | 5470                                 |\n| 6         | RFU                       | RFU                                  |\n| 7         | FSK: 50 kbps         | 50000                                |\n| 8 ~ 15    | RFU                       | RFU                                  |\n\n### Appendix II：TX Power by Region\n\n** EU868 **\n\nBy default, MaxEIRP is considered to be +16 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8 ~ 15  | RFU                  |\n\n** US915 **\n\n| TXPower | Configuration (Conducted Power) |\n|---------|---------------------------------|\n| 0       | 30 dBm - 2*TXpower         |\n| 1       | 28 dBm                     |\n| 2       | 26 dBm                     |\n| 3 ~ 9   | -                               |\n| 10      | 10 dBm                     |\n| 11 ~ 15 | RFU                             |\n\n** AU915 **\n\nBy default, MaxEIRP is considered to be +30 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1 ~ 10  | MaxEIRP - 2*TXPower  |\n| 11 ~ 10 | RFU                  |\n\n** KR920 **\n\nBy default, MaxEIRP is considered to be +14 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8 ~ 15  | RFU                  |\n\n** AS923 **\n\nBy default, Max EIRP is considered to be 16 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8 ~ 15  | RFU                  |\n\n** IN865 **\n\nBy default, MaxEIRP is considered to be 30 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8       | MaxEIRP - 16 dB |\n| 9       | MaxEIRP - 18 dB |\n| 10      | MaxEIRP - 20 dB |\n| 11 ~ 15 | RFU                  |\n\n** RU864 **\n\nBy default, MaxEIRP is considered to be +16 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8 ~ 15  | RFU                  |\n\n** CN470 **\n\nBy default, MaxEIRP is considered to be +19.15 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP 2 dB    |\n| 2       | MaxEIRP 4 dB    |\n| 3       | MaxEIRP 6 dB    |\n| 4       | MaxEIRP 8 dB    |\n| 5       | MaxEIRP - 10 dB |\n| 6       | MaxEIRP - 12 dB |\n| 7       | MaxEIRP - 14 dB |\n| 8 ~ 15  | RFU                  |\n\n** EU433 **\n\nBy default, MAxEIRP is considered to be +12.15 dBm.\n\n| TXPower | Configuration (EIRP) |\n|---------|----------------------|\n| 0       | MaxEIRP              |\n| 1       | MaxEIRP - 2 dB  |\n| 2       | MaxEIRP - 4 dB  |\n| 3       | MaxEIRP - 6 dB  |\n| 4       | MaxEIRP - 8 dB  |\n| 5       | MaxEIRP - 10 dB |\n| 6 ~ 15  | RFU                  |\n\n### Appendix III：Maximum Transmission Load by Region\n\n\n> **TIP:** NOTE\nM in the following list is the length with MAC header, N is the maximum usable payload size for the user data without MAC header.\n\n\n** EU868 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** US915 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 19          | 11          |\n| 1         | 61          | 53          |\n| 2         | 133         | 125         |\n| 3         | 250         | 242         |\n| 4         | 250         | 242         |\n| 5 ~ 7     | Not Defined | Not Defined |\n| 8         | 61          | 53          |\n| 9         | 137         | 129         |\n| 10        | 250         | 242         |\n| 11        | 250         | 242         |\n| 12        | 250         | 242         |\n| 13        | 250         | 242         |\n| 14 ~ 15   | Not Defined | Not Defined |\n\n** AU915 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | Not Defined | Not Defined |\n| 8         | 61          | 53          |\n| 9         | 137         | 129         |\n| 10        | 250         | 242         |\n| 11        | 250         | 242         |\n| 12        | 250         | 242         |\n| 13        | 250         | 242         |\n| 14 ~ 15   | Not Defined | Not Defined |\n\n** KR920 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6 ~ 15    | Not Defined | Not Defined |\n\n** AS923 **\n\n| Data Rate | Uplink MAC Payload Size (M) | Downlink MAC Payload Size (M) |  |  |\n| --- | --- | --- | --- | --- |\n|  | UplinkDwellTime = 0 | UplinkDwellTime = 1 | DownlinkDwellTime = 0 | DownlinkDwellTime = 1 |\n| 0 | 59 | N/A | 59 | N/A |\n| 1 | 59 | N/A | 59 | N/A |\n| 2 | 59 | 19 | 59 | 19 |\n| 3 | 123 | 61 | 123 | 61 |\n| 4 | 250 | 133 | 250 | 133 |\n| 5 | 250 | 250 | 250 | 250 |\n| 6 | 250 | 250 | 250 | 250 |\n| 7 | 250 | 250 | 250 | 250 |\n| 8 | RFU | RFU | RFU | RFU |\n\n** IN865 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** RU864 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 230         | 222         |\n| 5         | 230         | 222         |\n| 6         | 230         | 222         |\n| 7         | 230         | 222         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n** CN470 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6 ~ 15    | Not Defined | Not Defined |\n\n** EU433 **\n\n| Data Rate | M           | N           |\n|-----------|-------------|-------------|\n| 0         | 59          | 51          |\n| 1         | 59          | 51          |\n| 2         | 59          | 51          |\n| 3         | 123         | 115         |\n| 4         | 250         | 242         |\n| 5         | 250         | 242         |\n| 6         | 250         | 242         |\n| 7         | 250         | 242         |\n| 8 ~ 15    | Not Defined | Not Defined |\n\n### Appendix IV: Asynchronous Events\n\nThis section describes the output from UART lines of RAK3172 that can occur at any point in time while the device is operational.\n\n| Event                      | UART output         | Status description                                                                               |\n|----------------------------|---------------------|--------------------------------------------------------------------------------------------------|\n| Beacon acquisition process | `+BC:`*< status >*  | `FAILED` - Beacon sync failed                                                                    |\n|                            |                     | `DONE` - Switch to classB mode                                                                   |\n|                            |                     | `LOST` - No Beacon received for 2 hours, switch to classA                                        |\n|                            |                     | `LOCKED` - Receive Beacon                                                                        |\n| Pingslot process           | `+PS:`*< status >*  | `DONE` - At this time, ping slots will be opened periodically. The modem is now in Class B mode. |\n| Class B/C downlink         | `+EVT:`*< status >* | `RX3/RXC, RSSI -110, SNR 5` - Indicates that data has been received on pingslot received window. |\n|                            |                     | `PortNumber:12345678` - Received binary data on PortNumber.                                      |\n|                            |                     | `UNICAST` - Let the host know that the Rx is in unicast Class B mode.                            |\n|                            |                     | `MULCAST MC1` - Data received in multicast group 1                                               |\n| Class A downlink           | `+EVT:`*< status >* | `RX1/RX2, RSSI -110, SNR 5`                                                                      |\n|                            |                     | `PortNumber:12345678` - Received binary data on PortNumber.                                      |\n| Join                       | `+EVT:`*< status >* | `JOIN FAILED`                                                                                    |\n|                            |                     | `JOINED`                                                                                         |\n| Confirm                    | `+EVT:`*< status >* | `SEND CONFIRMED OK`                                                                              |\n|                            |                     | `SEND CONFIRMED FAILED`                                                                          |\n| P2P                        | `+EVT:`*< status >* | `00112233` - Received binary data format data                                                    |\n|                            |                     | `RXP2P, RSSI -110, SNR 5` - Indicates that data has been received on P2P received window.        |\n| Link Check                 | `+EVT:`*< status >* | `LINKCHECK:Y0,Y1,Y2,Y3,Y4`                                                                       |\n|                            |                     | Y0 - represents link status (1: links success, 2: link fail)                                     |\n|                            |                     | Y1 - represents the DemodMargin                                                                  |\n|                            |                     | Y2 - represents the NbGateways                                                                   |\n|                            |                     | Y3 - represents the RSSI of the command’s download                                               |\n|                            |                     | Y4 - represents the SNR of the command’s download                                                |\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\deprecated-at-command.md","token_count":0}
{"id":"41537ce2bea697f33abeaa9e8c42f3ca","product_family":"wisduo","product_id":"rak3172-module","category":"Reference","title":"RAK3172 WisDuo LoRaWAN Module Low Level Development Reference","content":"# RAK3172 WisDuo LoRaWAN Module Low Level Development Reference\n","keywords":[],"source_file":"wisduo\\rak3172-module\\low-level-development.md","token_count":0}
{"id":"1aba527943b4e2b64dcd4896e99836db","product_family":"wisduo","product_id":"rak3172-module","category":"How-To","title":"Developing Custom Firmware for RAK3172 Module Using STM32WL SDK","content":"## Overview\n\nThe RAK3172 module utilizes an RF System-on-Chip IC from STMicroelectronics, specifically the STM32WL series, which finds application in various LPWAN IoT devices.\n\nSTM32WL microcontrollers incorporate a sub-GHz radio based on Semtech SX126x, catering to the demands of a diverse range of Low-Power Wide Area Network (LPWAN) wireless applications in industrial and consumer Internet-of-Things (IoT) domains. The specific STM32WL microcontroller employed in the RAK3172 is the STM32WLE5CCU6.\n\nWhile the RAK3172 has a built-in default firmware with a set of AT commands that can be interfaced with an external host like other microcontrollers, it can also be used by developing custom firmware directly on its chip using the STM32WL SDK from STMicroelectronics. Taking this approach will reduce the overall cost of the device because there will be no need for an external microcontroller, but it will require extra software development effort.\n\nThis guide will illustrate how to generate custom firmware for the STM32WLE5CCU6, which is inside the RAK3172 module. It supports three STM32WL SDK versions: v1.0.0, v1.2.0, and v1.3.0.\n\n- [STM32CubeIDE guide with STM32WL SDK v1.0.0](#rak3172-on-stm32cubeide-with-stm32wl-sdk-v100)\n- [STM32CubeIDE guide with STM32WL SDK v1.2.0](#rak3172-on-stm32cubeide-with-stm32wl-sdk-v120)\n- [STM32CubeIDE guide with STM32WL SDK v1.3.0](#rak3172-on-stm32cubeide-with-stm32wl-sdk-v130)\n\n\n> **TIP:** NOTE\n- **STM32WL SDK v1.0.0** was tested on **STM32CubeIDE v1.7.0**.\n- **STM32WL SDK v1.2.0** was tested on **STM32CubeIDE v1.10.0**.\n- **STM32WL SDK v1.3.0** was tested on **STM32CubeIDE v1.10.0 and v1.14.0**.\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\low-level-development.md","token_count":0}
{"id":"261b19c906e1de83b8fb1a4a618222cd","product_family":"wisduo","product_id":"rak3172-module","category":"How-To","title":"Guide on Using STM32WL SDK with STM32CubeIDE for RAK3172","content":"## Guide on Using STM32WL SDK Using STM32CubeIDE\n\n### Installation of STM32Cube IDE\n\n1. Download the [STM32Cube IDE](https://www.st.com/en/development-tools/stm32cubeide.html#overview&secondary=st-get-software) from the STMicroelectronics website. Then select the latest version compatible with your computer.\n\n> **Image:** STM32CubeIDE Software Download\n\n2. A license agreement from STMicroelectronics will be displayed, and you must agree to log in using your STMicroelectronics account. Create an account if you do not already have one.\n\n3. After downloading, unzip the installer file and begin the installation process. Simply click **Next** on the initial installation window and accept the license agreement.\n\n> **Image:** STM32CubeIDE Installation\n\n> **Image:** STM32CubeIDE License Agreement\n\n3. The next step is to determine the directory where you want the STM32CubeIDE software to be installed. Simply click **Next** to use the default folder, or you can select a different location.\n\n> **Image:** STM32CubeIDE Directory Location\n\n4. Select optional components for installation, such as J-Link and ST-Link drivers. It is highly recommended to include these drivers, as they will be useful for debugging and uploading binary firmware files to the STM32WL chip.\n\n> **Image:** STM32CubeIDE Drivers\n\n5. The progress bar will be displayed as the installation begins.\n\n> **Image:** STM32CubeIDE On-going Installation\n\n6. During installation, STMicroelectronics device drivers may appear. These are not required for STM32WL, so you can leave them uninstalled.\n\n> **Image:** STM32CubeIDE Optional Device Drivers\n\n7. If there are no issues during the installation process, you should be finished and can now create a desktop shortcut for the STM32CubeIDE application.\n\n> **Image:** STM32CubeIDE Installation Successful\n\n> **Image:** STM32CubeIDE Installation Finished\n\n8. Check if the installation of STM32CubeIDE was successful by trying to run the application. It should be free of errors. The application will prompt you for the workspace, and you can accept the default location if you do not want to specify a different one. You also have the option to create multiple workspaces, but only one can be active at a time.\n\n> **Image:** STM32CubeIDE Workspace Selection\n\n> **Image:** STM32CubeIDE Application Running\n\n### RAK3172 on STM32CubeIDE with STM32WL SDK v1.0.0\n\nSTMicroelectronics provides a free IDE called STM32CubeIDE, which you can use to develop firmware for various STM32 microcontrollers, including the STM32WL series. Based on Eclipse, it is a complete software IDE where you can easily debug your code with built-in integration to tools like ST-Link and other features like STM32CubeMX. It is multiplatform software that can run on Windows, Linux, and macOS.\n\nYou cannot directly select RAK3172 on the STM32CubeIDE, but you can use the STM32WLE5CCU6 inside it with the STM32WL SDK from STMicroelectronics to start your own custom firmware. This guide is only applicable to STM32WL SDK v1.0.0.\n\n#### Getting STM32WL SDK v1.0.0\n\nThis guide only works on v1.0.0 of the SDK.\n\n1. If you already have the STM32CubeIDE running on your machine, the next step is to download the [STM32WL SDK v1.0.0](https://www.st.com/en/embedded-software/stm32cubewl.html#get-software) from the STMicroelectronics website.\n\n> **Image:** STM32WL SDK Download Page\n\n> **Image:** STM32WL V1.0.0 Download\n\n2. The downloaded files usually go to the downloads folder. You need to extract it, and then you will see the STM32WL SDK firmware folder.\n\n> **Image:** STM32WL V1.0.0\n\n3. The structure of the extracted files should be the same as shown in **Figure 15**. Do not change this folder structure. It contains many examples related to the STM32WL chip.\n\n> **Image:** STM32WL V1.0.0 Folder Structure\n\n#### Modifications for the RAK3172\n\n##### Files Modification Needed to Run STM32WL SDK LoRaWAN Examples to RAK3172\n\nIf you already have the STM32WL V1.0.0 SDK folder, there are only a few files that you need to update to be able to create firmware that will run on the RAK3172.\n\n\n> **TIP:** NOTE\n\nSTM32 microcontroller firmware created using STM32CubeIDE (with the help of STM32CubeMX) has a **.ioc** file. This is a configuration file created by the STM32CubeMX tool. This is a useful tool in setting up peripherals and drivers quickly in the STM32 development ecosystem. However, once you make the file modifications mentioned in this guide, you cannot create a new **.ioc** file or modify it via STM32CubeMX. Otherwise, the modified files needed by the RAK3172 will be overwritten and will revert to their original state in the **.ioc** file.\n\nIn cases where you need to use STM32CubeMX to set up peripherals or drivers, you just need to repeat the same modifications mentioned in this section.\n\n\n1. Download the [Low Level Development zip file](https://downloads.rakwireless.com/LoRa/RAK3172/Firmware/RAK3172_Low_Level_Development.zip) from the RAK downloads site. Extract the zip file and inside the folder are four files that need to be copy-pasted on specific locations of the STM32WL V1.0.0 folder to make it compatible with RAK3172.\n\nThe majority of these files are for setting up the RF channel front end of the radio section on the STM32WL chip. Also, the startup file must be changed because the default startup on STM32WL SDK V1.0.0 is for the STM32WL55 series and not for STM32WLE5. The RAK3172 is based on STM32WLE5CCU6.\n\n\n> **TIP:** NOTE\nThis guide will demonstrate how to run the **LoRaWAN_End_Node** example of the STM32WL SDK to RAK3172. If you need to run other LoRaWAN-related examples like **LoRaWAN_AT_Slave**, you need to update the files on that folder.\n\n\n> **Image:** RAK3172 Low Level Development Files\n\n2. The radio related files `radio_board_if.c`, `radio_board_if.h`, and `radio_conf` must be placed in this location of the STM32WL SDK folder `\\STM32Cube_FW_WL_V1.0.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\LoRaWAN\\Target`. You have to overwrite or replace the old files.\n\n> **Image:** RAK3172 Radio Related Files for Modification\n\n> **Image:** RAK3172 Radio Related Files Replaced\n\n3. You also need to update the startup file. Place the `startup_stm32wle5ccux.s` file in this location: `\\STM32Cube_FW_WL_V1.0.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\STM32CubeIDE\\Application\\Startup`. There is a default startup file in that directory named `startup_stm32wl55jcix.s`. Delete that file.\n\nThe updated startup folder should be the same, as shown in **Figure 19**.\n\n> **Image:** RAK3172 Radio Related Files Replaced\n\n##### Initial Build Test for the RAK3172 Custom Firmware\n\n1. After making the file modifications, the next step is to test if the **LoRaWAN_End_Node** example can be built without errors.\n\n\n> **TIP:** NOTE\nIf this is your first time using STM32CubeIDE, it shows the **Information Center** by default. Just close it and access the project in the left panel.\n\n\n2. Open the STM32CubeIDE and click on `File` then `Open Projects from File System`.\n\n> **Image:** Open the Project in STM32CubeIDE\n\n3. You then need to browse to the project folder location by clicking the **Directory** button.\n\n> **Image:** Locate the Project Directory in STM32CubeIDE\n\n4. You should locate this directory `\\STM32Cube_FW_WL_V1.0.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node`. Click on **STM32CubeIDE** folder once, then click the **Select Folder**.\n\n> **Image:** Select the STM32CubeIDE Project Folder\n\n5. You should now see **STM32CubeIDE** checked and ready to be imported as an **Eclipse project**. If not checked, click the checkbox and then the **Finish** button. It will take some time to fully import the entire project.\n\n> **Image:** Open the LoRaWAN_End_Node Project\n\n6. After the successful import, you should now see the **LoRaWAN_End_Node** project structure on the left side of the STM32CubeIDE.\n\n> **Image:** Open the STM32CubeIDE Project\n\n7. With the modified files already implemented, you can check if the files are updated by checking the startup file `startup_stm32wle5ccux.s` and the `radio_board_if.c`. The startup file must be updated to show `startup_stm32wle5ccux.s`. You should see `#if defined(RAK3172_RF_CHANNEL_SWITCH)` on line 72 of the `radio_board_if.c` file, as shown in **Figure 25**. If not, then you were not successful in changing these files with the [Low Level Development required modification](#files-modification-needed-to-run-stm32wl-sdk-lorawan-examples-to-rak3172).\n\n> **Image:** Open the STM32CubeIDE Project\n\n8. You can now attempt to build the project by setting the build configuration to release, which will generate a `.bin` file.\n\n\n> **TIP:** NOTE\nIf you have an ST-LINK debugging tool, you can also choose **Debug** instead of **Release**.\n\n\n> **Image:** Configure Build to Release\n\n9. After setting the build configuration, you are now ready to build the project. You should see a successful compilation and generation of a `.bin` file.\n\n> **Image:** Build the Project\n\n> **Image:** Successful Project Build\n\n### RAK3172 on STM32CubeIDE with STM32WL SDK v1.2.0\n\nThe previous guide is for STM32WL SDK version 1.0.0. This guide is compatible with STM32WL SDK v1.2.0 and v1.3.0.\n\n#### Getting STM32WL SDK v1.2.0\n\n1. If you already have the STM32CubeIDE running on your machine, the next step is to download the [STM32WL SDK v1.2.0](https://www.st.com/en/embedded-software/stm32cubewl.html#get-software) from the STMicroelectronics website.\n\n> **Image:** STM32WL SDK Download Page\n\n> **Image:** STM32WL V1.2.0 Download\n\n2. The downloaded files usually go to the downloads folder. You need to extract it, and then you will see the STM32WL SDK firmware folder.\n\n> **Image:** STM32WL V1.2.0\n\n3. The structure of the extracted files should be the same as shown in **Figure 32**. Do not change this folder structure. It contains many examples related to the STM32WL chip.\n\n> **Image:** STM32WL V1.2.0 Folder Structure\n\n#### Modifications for the RAK3172\n\n##### Files Modification Needed to Run STM32WL SDK LoRaWAN Examples to RAK3172\n\nIf you already have the STM32WL V1.2.0 SDK folder, there are only a few files that you need to update to create firmware that will run on the RAK3172.\n\n\n> **TIP:** NOTE\n\nSTM32 microcontroller firmware created using STM32CubeIDE (with the help of STM32CubeMX) has a **.ioc** file. This is a configuration file created by the STM32CubeMX tool. This is a useful tool in setting up peripherals and drivers quickly in the STM32 development ecosystem. However, once you make the file modifications mentioned in this guide, you cannot create a new **.ioc** file or modify it via STM32CubeMX. Otherwise, the modified files needed by the RAK3172 will be overwritten and will revert to their original state in the **.ioc** file.\n\nIn cases where you need to use STM32CubeMX to set up peripherals or drivers, you just need to repeat the same modifications mentioned in this section.\n\n\n1. Download the [Low-Level Development zip file for v1.2.0](https://downloads.rakwireless.com/LoRa/RAK3172/Firmware/RAK3172_Low_Level_Development_v1_2_0.zip) from the RAK downloads site. Extract the zip file, and inside the folder are four files that need to be copied and pasted to specific locations in the STM32WL V1.2.0 folder to make it compatible with RAK3172.\n\nThe majority of these files are for setting up the RF channel front end of the radio section on the STM32WL chip. Also, the startup file must be changed because the default startup on STM32WL SDK V1.2.0 is for the STM32WL55 series and not for STM32WLE5. The RAK3172 is based on STM32WLE5CCU6.\n\n\n> **TIP:** NOTE\nThis guide will demonstrate how to run the **LoRaWAN_End_Node** example of the STM32WL SDK to RAK3172. If you need to run other LoRaWAN-related examples like **LoRaWAN_AT_Slave**, you need to update the files on that folder.\n\n\n> **Image:** RAK3172 Low Level Development Files\n\n2. The radio related files `radio_board_if.c`, `radio_board_if.h`, and `radio_conf` must be placed in this location of the STM32WL SDK folder `\\STM32Cube_FW_WL_V1.2.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\LoRaWAN\\Target`. You have to overwrite or replace the old files.\n\n> **Image:** RAK3172 Radio Related Files for Modification\n\n> **Image:** RAK3172 Radio Related Files Replaced\n\n3. You also need to update the startup file. Move the `startup_stm32wle5ccux.s` file to this location: `\\STM32Cube_FW_WL_V1.2.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\STM32CubeIDE\\Application\\User\\Startup`. Delete the default startup file in that directory, named `startup_stm32wl55jcix.s`.\n\nThe updated startup folder should look like the one shown in **Figure 36**.\n\n> **Image:** RAK3172 Radio Related Files Replaced\n\n4. After the modifications above, there are minor changes needed to be adjusted on other source files.\n\n- On *\\STM32Cube_FW_WL_V1.2.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\Core\\Inc\\platform.h*, you need to comment out `#define USE_BSP_DRIVER`. It should be `//#define USE_BSP_DRIVER`.\n- On *\\STM32Cube_FW_WL_V1.2.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node\\LoRaWAN\\Target\\lorawan_conf.h*, you need to change the version of LoRaWAN to 1.0.3 which is the commonly used LNS version at the moment of this writing. To do this, you have to change LORAMAC_SPECIFICATION_VERSION to 0x01000300. It should look like this `#define LORAMAC_SPECIFICATION_VERSION 0x01000300`. However, if you are using LoRaWAN version 1.0.4 on your LNS, you do not need to perform this step since the DevNonce will be handled correctly.\n\n##### Initial Build Test for the RAK3172 Custom Firmware\n\n1. After making the file modifications, the next step is to test if the **LoRaWAN_End_Node** example can be built without errors.\n\n\n> **TIP:** NOTE\nIf this is your first time using STM32CubeIDE, it shows the **Information Center** by default. Just close it and access the project in the left panel.\n\n\n2. Open the STM32CubeIDE and click on `File` then `Open Projects from File System`.\n\n> **Image:** Open the Project in STM32CubeIDE\n\n3. You then need to browse to the project folder location by clicking the **Directory** button.\n\n> **Image:** Locate the Project Directory in STM32CubeIDE\n\n4. You should locate this directory `\\STM32Cube_FW_WL_V1.2.0\\Projects\\NUCLEO-WL55JC\\Applications\\LoRaWAN\\LoRaWAN_End_Node`. Click on **STM32CubeIDE** folder once, then click the **Select Folder**.\n\n> **Image:** Select the STM32CubeIDE Project Folder\n\n5. You should now see the **STM32CubeIDE** checked and ready to be imported as an **Eclipse project**. If not checked, select the checkbox and then click the **Finish** button. It will take some time to fully import the entire project.\n\n> **Image:** Open the LoRaWAN_End_Node Project\n\n6. After the successful import, you should now see the **LoRaWAN_End_Node** project structure on the left side of the STM32CubeIDE.\n\n> **Image:** Open the STM32CubeIDE Project\n\n7. With the modified files already implemented, you can check if the files are updated by checking the startup file `startup_stm32wle5ccux.s` and the `radio_board_if.c`. The startup file must be updated to show `startup_stm32wle5ccux.s`. You should see `#if defined(RAK3172_RF_CHANNEL_SWITCH)` on line 72 of the `radio_board_if.c` file, as shown in **Figure 42**. If not, then you were not successful in changing these files with the [Low Level Development required modification](#files-modification-needed-to-run-stm32wl-sdk-lorawan-examples-to-rak3172).\n\n> **Image:** Open the STM32CubeIDE Project\n\n8. The next step is to ensure that a bin file will be generated for your release build. Go to the properties and ensure that *Convert to binary file (-O binary)* is checked.\n\n> **Image:** Bin generation settings\n\n9. You can now attempt to build the project by setting the build configuration to release, which will generate a `.bin` file.\n\n\n> **TIP:** NOTE\nIf you have an ST-LINK debugging tool, you can also choose **Debug** instead of **Release**.\n\n\n> **Image:** Configure Build to Release\n\n10. After setting the build configuration, you are now ready to build the project. You should see a successful compilation and generation of a `.bin` file.\n\n> **Image:** Build the Project\n\n> **Image:** Successful Project Build\n\n### RAK3172 on STM32CubeIDE with STM32WL SDK v1.3.0\n\nThe STM32WL SDK v1.3.0 guide is nearly identical to the [guide for v1.2.0](#rak3172-on-stm32cubeide-with-stm32wl-sdk-v120).\n\nFollow the same procedure for changing the radio-related source files and startup file. You can also use the same RF source files used in v1.2.0 for v1.3.0. However, you must work with v1.3.0 of the STM32WL SDK package instead of the older version (v1.2.0).\n","keywords":["STM32WL SDK","STM32CubeIDE","RAK3172","LoRaWAN","firmware development"],"source_file":"wisduo\\rak3172-module\\low-level-development.md","token_count":0}
{"id":"9cc8a989ff09ae49ffe872ebb24c1e71","product_family":"wisduo","product_id":"rak3172-module","category":"Concept","title":"RAK3172 WisDuo LoRaWAN Module Overview","content":"# RAK3172 WisDuo LoRaWAN Module\n\nThank you for choosing **RAK3172 WisDuo LoRaWAN Module** in your awesome IoT project! 🎉 To help you get started, we have provided you all the necessary documentation for your product.\n\n* [Quick Start Guide](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/quickstart/)\n* [AT Command Manual](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/at-command-manual/)\n* [Low Level Development](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/low-level-development/)\n* [Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/datasheet/)\n* [AT Command Migration Guide of RAK3172 to RUI3](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3/)\n* [RAK3172 3D Model](https://downloads.rakwireless.com/3D_File/WisDuo/3D_RAK3172.stp)\n* [Reference Design](https://docs.rakwireless.com/product-categories/wisduo/rak3272s-breakout-board/datasheet/#schematic-diagram)\n\n\n> **TIP:** NOTE\nThere are two certification variants available for the RAK3172 Module: (1) with the CE & UKCA Certification Mark and (2) with FCC, IC & RCM Certification Mark.\n\nIf you need LoRa module with BLE 5.0 capability, you can check [RAK11720](https://store.rakwireless.com/products/rak11720-ambiq-apollo3-module-for-lorawan?utm_source=RAK11720&utm_medium=Document&utm_campaign=BuyFromStore) which is pin-to-pin compatible to RAK3172 with extra pins for additional ground and BLE RF antenna port.\n\n\n\n> **WARNING:** Temperature ratings:\n\n**RAK3172** is -20° C to 85° C\n\n**RAK3172-T** is -40° C to 85° C\n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\overview.md","token_count":0}
{"id":"3f3a4bc5fefce38b1e0d2ba903ffd788","product_family":"wisduo","product_id":"rak3172-module","category":"Concept","title":"RAK3172 Module Overview and Features","content":"## Product Description\n\nThe RAK3172 is a low-power, long-range transceiver module based on the STM32WLE5CC chip. It provides an easy-to-use, small-sized, low-power solution for long-range wireless data applications. This module complies with Classes A, B, and C of the LoRaWAN 1.0.3 specifications. It can easily connect to different LoRaWAN server platforms like The Things Network (TTN), Chirpstack, Actility, etc. It also supports LoRa Point-to-Point (P2P) communication mode, which helps you implement your own customized long-range LoRa network quickly.\n\nYou can configure the module's mode and operation using AT commands via a UART interface. The RAK3172 also offers low-power features that are well-suited for battery-powered applications.\n","keywords":[],"source_file":"wisduo\\rak3172-module\\overview.md","token_count":150}
{"id":"3ac990de9041b275caaf7aee61d89292","product_family":"wisduo","product_id":"rak3172-module","category":"Concept","title":"RAK3172 Module Product Features Overview","content":"## Product Features\n\n- Based on **STM32WLE5CCU6**\n- **LoRaWAN 1.0.3** specification compliant\n- **Supported bands**: EU433, CN470, IN865, EU868, AU915, US915, KR920, RU864, and AS923-1/2/3/4\n- LoRaWAN Activation by OTAA/ABP\n- LoRa Point-to-Point (P2P) communication\n- Custom firmware using Arduino via RUI3 API\n- Easy to use AT Command Set via UART interface\n- Long-range - greater than 15 km with optimized antenna\n- ARM Cortex-M4 32-bit\n- 256 kbytes flash memory with ECC\n- 64 kbytes RAM\n- Ultra-Low Power Consumption of 1.69 μA in sleep mode\n- **Supply Voltage**: 2.0 V ~ 3.6 V\n- **Temperature Range**:\n    - **RAK3172**: -20° C ~ 85° C\n    - **RAK3172-T**: -40° C ~ 85° C\n\n\n> **TIP:** Note\nFor CE and FCC certifications we provide an AT command guide.    \nYou can find it in our [RUI3 documentation](https://docs.rakwireless.com/product-categories/software-apis-and-libraries/rui3/certification-guide) or get it from our [Download Center](https://downloads.rakwireless.com/#RUI/RUI3/Certification%20Guide/).\n \n\n","keywords":[],"source_file":"wisduo\\rak3172-module\\overview.md","token_count":0}
{"id":"538432f1b311d583e96075a4b1ebdc01","product_family":"wisduo","product_id":"rak3172-module","category":"How-To","title":"RAK3172 WisDuo LoRaWAN Module Quick Start Guide","content":"# RAK3172 WisDuo LoRaWAN Module Quick Start Guide\n\nThis guide covers the following topics:\n\n- [RAK3172 as a Stand-Alone Device Using RUI3](#rak3172-as-a-stand-alone-device-using-rui3)\n- [RAK3172 as a LoRa/LoRaWAN Modem via AT Command](#rak3172-as-a-loralorawan-modem-via-at-command)\n- [Connecting to The Things Network (TTN)](#connect-with-the-things-network-ttn)\n- [Connecting with Chirpstack](#connecting-with-chirpstack)\n- [LoRa P2P Mode](#lora-p2p-mode)\n","keywords":[],"source_file":"wisduo\\rak3172-module\\quickstart.md","token_count":0}
{"id":"b218b25b393418e54e41027c59bfd2d4","product_family":"wisduo","product_id":"rak3172-module","category":"How-To","title":"Firmware Upgrade Guide for RAK3172 Module","content":"## Miscellaneous\n\n### Upgrade the Firmware\n\nIf you want to upgrade to the latest version of the firmware of the module, you can follow this section. The latest firmware can be found in the software section of [RAK3172 Datasheet](https://docs.rakwireless.com/product-categories/wisduo/rak3172-module/datasheet/#firmware).\n\n\n> **TIP:** NOTE\n\n**What if the RAK3172 module stops responding to AT commands and firmware updates?**\n\nYou can recover your device by using the `.hex` file in the datasheet and uploading it using STM32CubeProgrammer. The guide on updating STM32 firmware using STM32CubeProgrammer can be found in the [Learn section](https://learn.rakwireless.com/hc/en-us/articles/26687606549911-How-To-Guide-STM32CubeProgrammer-for-RAK-Modules).\n\n\n\n> **WARNING:** Uploading the **.hex** file via STM32CubeProgrammer will erase all configured data on the device.\n\n\n#### Firmware Upgrade Through UART2\n\n##### Minimum Hardware and Software Requirements\n\nRefer to the table for the minimum hardware and software required to perform the firmware upgrade via UART2:\n\n| Hardware/Software | Requirement                                   |\n| :---------------: | :-------------------------------------------: |\n| Computer          | A Windows/Ubuntu/Mac computer                 |\n| Firmware File     | Bin firmware file downloaded from the website |\n| Others            | A USB to TTL module                           |\n\n##### Firmware Upgrade Procedure\n\nExecute the following procedure to upgrade the firmware in Device Firmware Upgrade (DFU) mode through the UART2 interface.\n\n\n> **TIP:** NOTE\nRAK3172 should automatically go to BOOT mode when the firmware is uploaded via RAK DFU Tool or WisToolBox.\n\nIf BOOT mode is not initiated, you can manually send `AT+BOOT` command to start bootloader mode.\n\n\n1.  Download the latest application firmware of the RAK3172.\n\n    - [RAK3172 Firmware](https://downloads.rakwireless.com/#RUI/RUI3/Image/)\n\nYou can also refer to the table below:\n\n|      Model       |                             Version                              |                                             Source                                                                         |\n| :--------------: | :--------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------: |\n|  RAK3172 (.bin)  |      RUI3 Application Code only (default baudrate = 115200)      |  [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-E_latest.bin)              |\n|  RAK3172 (.hex)  | RUI3 Bootloader and Application Code(default baudrate = 115200)  |  [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-E_latest_final.hex)        |\n| RAK3172-T (.bin) |      RUI3 Application Code only(default baudrate = 115200)       |  [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-T_latest.bin)              |\n| RAK3172-T (.hex) | RUI3 Bootloader and Application Code (default baudrate = 115200) |  [Download](https://downloads.rakwireless.com/RUI/RUI3/Image/RAK3172-T_latest_final.hex)        |\n|  RAK3172 (OLD)   |         **DEPRECATED** V1.0.4 (default baudrate = 9600)          |  [Download](https://downloads.rakwireless.com/LoRa/RAK3172/Firmware/RAK3172_Latest_Firmware.zip)|\n\n\n> **WARNING:** There are RAK3172 devices loaded with old firmware versions which are not based on RUI3 (RAKwireless Unified Interface V3). These devices have v1.0.4 and below.\n\nIf the host microcontroller code is based on this old firmware, refer to the [RAK3172 AT Command Migration guide](https://learn.rakwireless.com/hc/en-us/articles/26687498449559-AT-Command-Migration-Guide-of-RAK3172-to-RUI3-RAKwireless-Unified-Interface-V3) that explains in detail the few differences between the two AT commands set.\n\n\n2.  Download the RAK Device Firmware Upgrade (DFU) tool.\n    - [RAK Device Firmware Upgrade (DFU) Tool](https://downloads.rakwireless.com/#LoRa/Tools/RAK_Device_Firmware_Upgrade_tool/)\n\n3.  Connect the RAK3172 module with a computer through a USB to TTL. Refer to [Figure 35](#connect-to-the-rak3172).\n4.  Open the Device Firmware Upgrade tool. Select the serial port and baud rate (115200) of the module and click the **Select Port** button.\n\n\n> **TIP:** NOTE\n\nIf your firmware upload always fails, check your current baud rate setting using the `AT+BAUD=?` command and use that baud rate value in the RAK DFU Tool. You can also check if you selected the right COM port.\n\n\n> **Image:** Device Firmware Upgrade Tool\n\n5.  Select the application firmware file of the module with the suffix **.bin**.\n\n> **Image:** Select firmware\n\n6.  Click the **Upgrade** button to upgrade the device. After the upgrade is complete, the RAK3172 will be ready to work with the new firmware.\n\n> **Image:** Firmware upgrading\n\n> **Image:** Upgrade successful\n\n### Arduino Installation\n\nRefer to [Software section](#software).\n\n","keywords":["firmware upgrade","RAK3172","STM32CubeProgrammer","DFU mode","UART2","AT commands"],"source_file":"wisduo\\rak3172-module\\quickstart.md","token_count":0}
